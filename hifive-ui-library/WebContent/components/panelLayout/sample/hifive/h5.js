/* Copyright (C) 2012-2014 NS Solutions Corporation. Licensed under the Apache License, Version 2.0. hifive version Nightly_2015-03-26_18-30-32-072 gitCommitId 6a6b947e5e31b04f71fe56e5d28928fd5862ec7d (util,async,resource,controller,dataModel,modelWithBinding,view,ui,api.geo,api.sqldb,api.storage,scene) */
(function(a){var fa,Ta,Da;function e(a,e,u){var v=null,A=ga[a],f=vb[a];f&&(v=f(a,A,e,u));!v&&A&&(v=d.u.str.format.apply(null,[A].concat(e)));v&&(v+="(code="+a+")");e=v?Error(v):Error("FwError: code = "+a);a&&(e.code=a);u&&(e.detail=u);throw e;}function wb(a){for(var d in a)a.hasOwnProperty(d)&&(ga[d]=a[d])}function R(a,e,u){var v=null,A=ga[a];A&&(e=[A].concat(e),v=d.u.str.format.apply(null,e));return{code:a,message:v,detail:u}}function O(a){return null==a?a:H(a)?a:[a]}function x(a){return"string"===
typeof a}function Ka(a){return a.isRejected?a.isRejected():"rejected"===a.state()}function La(a){return a.isResolved?a.isResolved():"resolved"===a.state()}function pa(a){return!x(a)?!1:!!a.match(/^[A-Za-z_\$][\w|\$]*$/)}function va(d){if("regexp"===a.type(d))return d;var e="",e=-1!==d.indexOf("*")?a.map(d.split("*"),function(a){return a.replace(/\W/g,"\\$&")}).join(".*"):d;return RegExp("^"+e+"$")}function qa(a,d,e){a&&(a._h5UnwrappedCall?a._h5UnwrappedCall(d,e):a[d](e))}function Y(d,e,u,v){return d[a.hasOwnProperty("curCSS")?
"pipe":"then"](e,u,v)}function jb(a){return a&&a.document&&a.document.nodeType===Ma&&Z(a.document)===a}function N(a){return typeof a.nodeType===la?jb(a)?a.document:null:a.nodeType===Ma?a:a.ownerDocument}function Z(a){return window.document===a?window:a.defaultView||a.parentWindow}function V(a,e,u,v){function A(a){return function(){var b=d.u.obj.argsToArray(arguments);E[a]=2>b.length?b[0]:b;!q&&++z===p&&e&&e(E)}}function f(){q=!0;u?u.apply(this,arguments):v&&d.settings.commonFailHandler&&d.settings.commonFailHandler.call(this,
arguments)}var j=a?a.length:0,t=d.async.isPromise;if(1===j){j=a[0];if(t(j)){j.done(e);u?j.fail(u):v&&d.settings.commonFailHandler&&j.fail(d.settings.commonFailHandler);return}j=0}if(0===j)e();else{for(var s=[],w=0,i=a.length;w<i;w++)j=a[w],t(j)&&s.push(j);var p=s.length;if(0===p)e&&e();else for(var E=[],z=0,q=!1,w=0;w<p;w++)s[w].done(A(w)).fail(f)}}var Ea=void 0;if(window.h5){if(window.h5.env&&"Nightly_2015-03-26_18-30-32-072"===window.h5.env.version)return;Ea=window.h5}var d={};window.h5=d;d.coexist=
function(){window.h5=Ea;return d};d.env={version:"Nightly_2015-03-26_18-30-32-072"};var ga={},vb={},kb=12029,la="undefined",$=1,Ma=9,ca=function(){var a=null;return function(d){a||(a=document.createElement("a"));a.setAttribute("href",d);return a.href}}(),H=Array.isArray||function(){var a=Object.prototype.toString;return function(d){return"[object Array]"===a.call(d)}}(),K=function(){if("function"===typeof RegExp()){var a=Object.prototype.toString;return function(d){return"[object Function]"===a.call(d)}}return function(a){return"function"===
typeof a}}();fa={controllerInternal:null};Da=Ta=void 0;(function(){function l(a){switch(a){case "string":return"s";case "number":return"n";case "boolean":return"b";case "String":return"S";case "Number":return"N";case "Boolean":return"B";case "infinity":return"i";case "-infinity":return"I";case "nan":return"x";case "date":return"d";case "regexp":return"r";case "array":return"a";case "object":return"o";case "null":return"l";case s:return"u";case "undefElem":return"_";case "objElem":return"@"}}function B(a,
b){if(x(a)){var c=a;b&&(c=c.replace(/\\n/g,"\n").replace(/\\r/g,"\r"));return c=c.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}return a instanceof String?new String(B(a.toString())):a}function u(a,b){return"1"===b?a:x(a)?a.replace(/\\\\/g,"\\-").replace(/\\b/g,"").replace(/\\f/g,"").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\-/g,"\\"):a instanceof String?new String(u(a.toString())):
a}function v(a,b,c){var g=d.async.deferred();d.ajax({url:a,async:b,cache:c,dataType:"script",converters:{"text script":function(a){return a}}}).done(function(){var a=t(arguments);a.push(this.url);g.notifyWith(g,a);g.resolveWith(g,a)}).fail(function(){g.rejectWith(g,t(arguments))});return g.promise()}function A(a){x(a)||e(w,"h5.u.obj.ns()");for(var a=a.split("."),b=a.length,c=0;c<b;c++)pa(a[c])||e(w,"h5.u.obj.ns()");for(var g=window,c=0;c<b;c++){var i=a[c];typeof g[i]===s&&(g[i]={});g=g[i]}return g}
function f(a,b){var c=A(a),g;for(g in b)b.hasOwnProperty(g)&&(void 0!==c[g]&&e(i,[a,g]),c[g]=b[g])}function j(b){return!b||!b.jquery?!1:b.jquery===a().jquery}function t(a){return Array.prototype.slice.call(a)}var s="undefined",w=11E3,i=11001,p=11004,E=11005,z=11006,q={},c={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;","'":"&#39;"},b=void 0!==document.createElement("script").onload,h=-1===/\r\n/.toString().indexOf("\r\n");f("h5.u",{loadScript:function(c,i){var h=d.async.deferred,g=O(c);(!g||0===g.length)&&
e(11007);for(var f=0,j=g.length;f<j;f++)c=g[f],(!x(c)||!a.trim(c))&&e(11007);null!=i&&!a.isPlainObject(i)&&e(11008,"h5.u.loadScript()");var L=i&&!1===i.async?!1:!0,p=!!(i&&!0===i.force),f=!!(i&&!0===i.parallel),l=!!(i&&!0===i.atomic),E=!p,z=L?h():null,s=L?function(a){z.reject(R(11010,[a]))}:null,j=L?function(){var a=h();setTimeout(function(){a.resolve([])},0);return a.promise()}:null,u=f?[]:null,A=[],w={};if(L){if(!l&&b){var B=a("head"),H=function(a){var b=h(),c=document.createElement("script");c.onload=
function(){c.onload=null;q[a]=a;b.resolve()};c.onerror=function(){c.onerror=null;b.reject(a)};c.type="text/javascript";c.src=E?a:a+(-1<a.indexOf("?")?"&_":"?_")+ +new Date;B[0].appendChild(c);return b.promise()};if(f)u.push(j()),a.each(g,function(){var a=ca(this);if(!p&&a in q)return!0;u.push(H(a))}),V(u,function(){z.resolve()},s);else{var P=Y(h().resolve(),j);a.each(g,function(){var a=ca(this);P=Y(P,function(){if(p||!(a in q))return H(a)},s)});Y(P,function(){z.resolve()},s)}}else if(f){var y=[];
u.push(j());y.push(null);a.each(g,function(){var a=ca(this);if(!p&&(a in q||a in w))return!0;u.push(v(a,L,E));l?w[a]=a:y.push(null)});f=g=null;l?(g=function(){a.each(t(arguments),function(b,c){a.globalEval(c[0])});a.extend(q,w);z.resolve()},f=a.noop):(g=function(){z.resolve()},f=function(){for(var b=t(arguments),c=0;c<y.length;c++)if(b[c]){var g=b[c][3];y[c]!==g&&(a.globalEval(b[c][0]),y.splice(c,1,g))}});d.async.when(u).done(g).fail(s).progress(f)}else P=Y(h().resolve(),j),a.each(g,function(){var b=
ca(this);P=Y(P,function(){var c=h();!p&&(b in q||b in w)?c.resolve():v(b,L,E).done(function(g){l?(A.push(g),w[b]=b):(a.globalEval(g),q[b]=b);c.resolve()}).fail(function(){c.reject(this.url)});return c.promise()},s)}),Y(P,function(){l&&(a.each(A,function(b,c){a.globalEval(c)}),a.extend(q,w));z.resolve()},s);return z.promise()}a.each(g,function(){var b=ca(this);if(!p&&(b in q||b in w))return!0;v(b,L,E).done(function(c){l?(A.push(c),w[b]=b):(a.globalEval(c),q[b]=b)}).fail(function(){e(11010,[b])})});
l&&(a.each(A,function(b,c){a.globalEval(c)}),a.extend(q,w))},createInterceptor:function(a,b){return function(c){var g={},i=a?a.call(this,c,g):c.proceed();c.result=i;if(!b)return i;if(i&&K(i.promise)&&!j(i)){var h=this;qa(i,"always",function(){b.call(h,c,g)});return i}b.call(this,c,g);return i}}});f("h5.u.str",{startsWith:function(a,b){return 0===a.lastIndexOf(b,0)},endsWith:function(a,b){var c=a.length-b.length;return 0<=c&&a.lastIndexOf(b)===c},format:function(a,b){if(null==a)return"";var c=arguments;
return a.replace(/\{(\d+)\}/g,function(a,b){var i=c[parseInt(b,10)+1];return typeof i===s?s:i})},escapeHtml:function(b){return"string"!==a.type(b)?b:b.replace(/[&"'<>]/g,function(a){return c[a]})}});f("h5.u.obj",{expose:f,ns:A,serialize:function(b){function c(a){for(var b=0,g=q.length;b<g;b++)if(a===q[b])return!0;return!1}function i(a){for(var b=0,c=q.length;b<c;b++)a===q[b]&&q.splice(b,1)}function g(b){var d=b,n=a.type(b);"object"===typeof b&&(b instanceof String?n="String":b instanceof Number?n=
"Number":b instanceof Boolean&&(n="Boolean"));switch(n){case "String":case "string":d=l(n)+B(d);break;case "Boolean":d=d.valueOf();case "boolean":d=l(n)+(d?1:0);break;case "Number":d=d.valueOf();if(a.isNaN&&a.isNaN(b)||a.isNumeric&&!a.isNumeric(b))d=Infinity===b.valueOf()?l("infinity"):-Infinity===b.valueOf()?l("-infinity"):l("nan");d=l(n)+d;break;case "number":d=a.isNaN&&a.isNaN(b)||a.isNumeric&&!a.isNumeric(b)?Infinity===b?l("infinity"):-Infinity===b?l("-infinity"):l("nan"):l(n)+d;break;case "regexp":d=
l(n)+B(d.toString(),h);break;case "date":d=l(n)+ +d;break;case "array":c(b)&&e(ERR_CODE_REFERENCE_CYCLE);q.push(b);for(var f=[],d=l(n)+"[",n=0,j=b.length;n<j;n++){f[n.toString()]=!0;var p;p=b.hasOwnProperty(n)?"function"===a.type(b[n])?l(s):g(b[n]).replace(/\\/g,"\\\\").replace(/"/g,'\\"'):l("undefElem");d+='"'+p+'"';n!==b.length-1&&(d+=",")}var n="",v;for(v in b)f[v]||"function"!==a.type(b[v])&&(n+='"'+B(v)+'":"'+g(b[v]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'",');n&&(d+=(b.length?",":"")+'"'+
l("objElem")+"{"+n.replace(/\\/g,"\\\\").replace(/"/g,'\\"'),d=d.replace(/,$/,""),d+='}"');d+="]";i(b);break;case "object":c(b)&&e(E);q.push(b);d=l(n)+"{";for(v in b)b.hasOwnProperty(v)&&"function"!==a.type(b[v])&&(d+='"'+v+'":"'+g(b[v]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'",');d=d.replace(/,$/,"");d+="}";i(b);break;case "null":case s:d=l(n)}return d}K(b)&&e(11002);var q=[];return"2|"+g(b)},deserialize:function(b){function c(b){function d(a){switch(a){case "s":return"string";case "n":return"number";
case "b":return"boolean";case "S":return"String";case "N":return"Number";case "B":return"Boolean";case "i":return"infinity";case "I":return"-infinity";case "x":return"nan";case "d":return"date";case "r":return"regexp";case "a":return"array";case "o":return"object";case "l":return"null";case "u":return s;case "_":return"undefElem";case "@":return"objElem"}}b.match(/^(.)(.*)/);b=RegExp.$1;g=RegExp.$2?RegExp.$2:"";if(void 0!==b&&""!==b)switch(d(b)){case "String":g=new String(u(g,i));break;case "string":break;
case "Boolean":"0"===g||"1"===g?g=new Boolean("1"===g):e(z);break;case "boolean":"0"===g||"1"===g?g="1"===g:e(z);break;case "nan":""!==g&&e(z);g=NaN;break;case "infinity":""!==g&&e(z);g=Infinity;break;case "-infinity":""!==g&&e(z);g=-Infinity;break;case "Number":"infinity"===d(g)?g=new Number(Infinity):"-infinity"===d(g)?g=new Number(-Infinity):"nan"===d(g)?g=new Number(NaN):(g=new Number(g),isNaN(g.valueOf())&&e(z));break;case "number":g=(new Number(g)).valueOf();isNaN(g)&&e(z);break;case "array":var h;
try{h=a.parseJSON(g)}catch(q){e(z)}H(h)||e(z);for(var n=0;n<h.length;n++)switch(d(h[n].substring(0,1))){case "undefElem":delete h[n];break;case "objElem":for(var f=c(l("object")+h[n].substring(1)),b=[],n=0,j=h.length-1;n<j;n++)b[n]=h[n];h=b;for(var v in f)h[v]=f[v];break;default:h[n]=c(h[n])}g=h;break;case "object":try{h=a.parseJSON(g)}catch(E){e(z)}a.isPlainObject(h)||e(z);for(v in h)h[v]=c(h[v]);g=h;break;case "date":g=new Date(parseInt(g,10));break;case "regexp":try{n=g.match(/^\/(.*)\/(.*)$/),
f=u(n[1],i),g=RegExp(f,n[2])}catch(t){e(z)}break;case "null":""!==g&&e(z);g=null;break;case s:""!==g&&e(z);g=void 0;break;default:e(p)}return u(g,i)}x(b)||e(11009);b.match(/^(.)\|(.*)/);var i=RegExp.$1;"1"!==i&&"2"!==i&&e(11003,[i,"2"]);var g=RegExp.$2;return c(g)},isJQueryObject:j,argsToArray:t,getByPath:function(a,b){x(a)||e(w,"h5.u.obj.getByPath()");var c=a.split("."),g=0;if("window"===c[0]&&(!b||b===window))g=1;for(var i=b||window,h=c.length;g<h&&!(i=i[c[g]],null==i);g++);return i}})})();(function(){function l(a,
d){a.target||(a.target=d);a.timeStamp||(a.timeStamp=(new Date).getTime());if(!a.isDefaultPrevented){var e=!1;a.isDefaultPrevented=function(){return e};a.preventDefault=function(){e=true}}if(!a.isImmediatePropagationStopped){var j=!1;a.isImmediatePropagationStopped=function(){return j};a.stopImmediatePropagation=function(){j=true}}}function B(a){var e={},f;for(f in a){var j=a[f];if(a.hasOwnProperty(f)&&(K(j)||null===j||"string"===typeof j||"number"===typeof j||"boolean"===typeof j))e[f]=j}this._mix=
function(a){for(var d in e)a[d]=e[d]};this._hasInterface=function(a){for(var f in e)if(!d.u.str.startsWith(f,"_")&&typeof a[f]===la)return!1;return!0}}function u(a){return new B(a)}a.extend(B.prototype,{mix:function(a){return this._mix(a)},hasInterface:function(a){return this._hasInterface(a)}});d.u.obj.expose("h5.mixin",{createMixin:u,eventDispatcher:u({hasEventListener:function(a,d){if(!this._eventListeners)return!1;var e=this._eventListeners[a];if(!e||!this._eventListeners.hasOwnProperty(a))return!1;
for(var j=0,l=e.length;j<l;j++)if(e[j]===d)return!0;return!1},addEventListener:function(a,d){(2>arguments.length||!x(a))&&e(16E3);null==d||this.hasEventListener(a,d)||(this._eventListeners||(this._eventListeners={}),this._eventListeners.hasOwnProperty(a)||(this._eventListeners[a]=[]),this._eventListeners[a].push(d))},removeEventListener:function(a,d){if(this.hasEventListener(a,d))for(var e=this._eventListeners[a],j=0,l=e.length;j<l;j++)if(e[j]===d){e.splice(j,1);break}},dispatchEvent:function(a){if(this._eventListeners){var d=
this._eventListeners[a.type];if(d){d=d.slice(0);l(a,this);for(var e=0,j=d.length;e<j&&!a.isImmediatePropagationStopped();e++)K(d[e])?d[e].call(a.target,a):d[e].handleEvent&&d[e].handleEvent(a);return a.isDefaultPrevented()}}}})})})();(function(){var l,B,u,v,A,f,j;function t(a){return a.match(/^error$/i)?l:a.match(/^warn$/i)?B:a.match(/^info$/i)?u:a.match(/^debug$/i)?v:a.match(/^trace$/i)?A:a.match(/^all$/i)?f:a.match(/^none$/i)?j:null}function s(a,b){var c={},i=a.slice(0,b),d=Math.min(F,b),h=i.slice(0,
d).join(" <- ");i.length>d&&(h+=" ...");c.preview=h;c.all=i.join("\n");return c}function w(a){var b="";a.name?b=a.name:(/^\s*function\s*([\w\-\$]+)?\s*\(/i.test(a.toString()),b=RegExp.$1);return b}function i(b){for(var b=d.u.obj.argsToArray(b),c=[],i=0,h=b.length;i<h;i++)c.push(a.type(b[i]));return c.join(", ")}function p(){}function E(b){(!x(b)||0===a.trim(b).length)&&e(c);this.category=a.trim(b)}var z=10003,q=10004,c=10005,b=10007,h=10008,n=10010,F=3;l=50;B=40;u=30;v=20;A=10;f=0;j=-1;var J=null;
p.prototype={init:function(){},log:function(a){window.console&&(x(a.args[0])?this._logMsg(a):this._logObj(a))},_logMsg:function(a){var b=a.args,c=null,c=1===b.length?b[0]:d.u.str.format.apply(d.u.str,b),b=this._getLogPrefix(a)+c;a.logger.enableStackTrace&&(b+="  ["+a.stackTrace.preview+"]");a.logger.enableStackTrace&&console.groupCollapsed?console.groupCollapsed(b):this._consoleOut(a.level,b);a.logger.enableStackTrace&&this._consoleOut(a.level,a.stackTrace.all);a.logger.enableStackTrace&&console.groupEnd&&
console.groupEnd()},_consoleOut:function(a,b){var c=!1;a==l&&console.error?(console.error(b),c=!0):a==B&&console.warn?(console.warn(b),c=!0):a==u&&console.info?(console.info(b),c=!0):a==v&&console.debug&&(console.debug(b),c=!0);!c&&console.log&&console.log(b)},_getLogPrefix:function(a){return"["+a.levelString+"]"+a.date.getHours()+":"+a.date.getMinutes()+":"+a.date.getSeconds()+","+a.date.getMilliseconds()+": "},_logObj:function(a){var b=a.args,c=this._getLogPrefix(a);b.unshift(c);a.level==l&&console.error?
this._output(console.error,b):a.level==B&&console.warn?this._output(console.warn,b):a.level==u&&console.info?this._output(console.info,b):a.level==v&&console.debug?this._output(console.debug,b):this._output(console.log,b)},_output:function(a,b){try{if(a.apply){a.apply(console,b);return}}catch(c){}a(b)}};E.prototype={enableStackTrace:!1,maxStackSize:10,error:function(a){this._log(l,arguments,this.error)},warn:function(a){this._log(B,arguments,this.warn)},info:function(a){this._log(u,arguments,this.info)},
debug:function(a){this._log(v,arguments,this.debug)},trace:function(a){this._log(A,arguments,this.trace)},_traceFunctionName:function(b){var c=[],d=Error();if(d=d.stack||d.stacktrace)var h=/_traceFunctionName/,c=d.replace(/\r\n/,"\n").replace(/at\b|@|Error\b|\t|\[arguments not available\]/ig,"").replace(/(http|https|file):.+[0-9]/g,"").replace(/ +/g," ").split("\n"),q=null,n=null,c=a.map(c,function(b,c){if(0===b.length)return null==n?"":null;q=""===a.trim(b)?"{anonymous}":a.trim(b);null===n&&h.test(b)&&
(n=c);return q}).slice(n+3);else for(var b=b.caller,d=0,e=this.maxStackSize;d<e;d++){var f=w(b),j=i(b.arguments),p;try{p=b.caller}catch(l){c.push("{unable to trace}");break}f?c.push("{"+f+"}("+j+")"):p?c.push("{anonymous}("+j+")"):c.push("{root}("+j+")");if(!p)break;b=p}return s(c,this.maxStackSize)},_log:function(a,b,c){var b={level:a,args:d.u.obj.argsToArray(b),stackTrace:this.enableStackTrace?this._traceFunctionName(c):""},i=J.out,h=J.defaultOut,c=[],q=!1;if(i)for(var i=O(i),n=0,e=i.length;n<e;n++){var f=
i[n];if(f.compiledCategory.test(this.category)&&a>=f.compiledLevel&&0<=f.compiledLevel&&(c.push(f),!1!==f.terminate)){q=!0;break}}(!c.length||!q)&&c.push(h);n=0;for(i=c.length;n<i;n++){h=c[n];e=h.compiledLevel;h=h.compiledTargets;if(a<e||0>e)break;b.logger=this;b.date=new Date;b.levelString=this._levelToString(a);if(!h||0===h.length)break;q=0;for(e=h.length;q<e;q++)h[q].log(b)}},_levelToString:function(a){if(a===l)return"ERROR";if(a===B)return"WARN";if(a===u)return"INFO";if(a===v)return"DEBUG";if(a===
A)return"TRACE"}};d.u.obj.expose("h5.log",{createLogger:function(a){return new E(a)},configure:function(){function c(d,g,f){if(!f){var p=g.category;(!x(p)||0===a.trim(p).length)&&e(n);p=a.trim(p);g.compiledCategory=va(p);l.push(p)}f=null==g.level?t(f?i.level:j.level):x(g.level)?t(a.trim(g.level)):g.level;"number"!==typeof f&&e(z,g.level);g.compiledLevel=f;f=[];p=g.targets;if(null!=p){var E=[];null==p||H(p)||x(p)&&a.trim(p).length||e(h);for(var p=O(p),F=0,y=p.length;F<y;F++){null==p[F]||x(p[F])&&a.trim(p[F]).length||
e(h);var S=p[F];if(S){-1!==a.inArray(S,E)&&e(b,S);var aa=d[S];aa||e(q,S);E.push(S);f.push(aa.compiledTarget)}}}g.compiledTargets=f}var i={level:"NONE",targets:null},f=a.extend(!0,{},d.settings.log),j=f.defaultOut;j||(j=i,f.defaultOut=j);var l=[],E=f.target;E||(E={},f.target=E);(function(b){a.isPlainObject(b)||e(10009);for(var c in b){var i=b[c];a.type(i.type)!=="object"&&i.type!=="console"&&e(1E4);var d=null,d=i.type==="console"?new p:a.extend(true,{},i.type);d.init&&d.init(i);i.compiledTarget=d}b.console=
{type:"console",compiledTarget:new p}})(E);c(E,j,!0);var F=f.out;if(F)for(var F=O(F),s=0,u=F.length;s<u;s++)c(E,F[s]);J=f}})})();(function(){function e(l){d.settings.aspects=a.map(O(l),function(a){a.target&&(a.compiledTarget=va(a.target));a.pointCut&&(a.compiledPointCut=va(a.pointCut));return a})}d.u.obj.ns("h5.settings");d.settings={commonFailHandler:null,aspects:null,log:null,listenerElementType:1,dynamicLoading:{retryCount:3,retryInterval:500},ajax:{retryCount:0,retryInterval:500,retryFilter:function(a){a=
a.status;if("POST"===this.type||!(0===a||a===kb))return!1}},trackstartTouchAction:"none",res:{baseUrl:null,timeoutTime:1E4}};var B=d.u.createInterceptor(function(a,d){this.log.info("{0}.{1}が開始されました。",this.__name,a.funcName);this.log.info(a.args);d.start=new Date;return a.proceed()},function(a,d){var e=(new Date).getTime()-d.start.getTime();this.log.info("{0}.{1}が終了しました。 Time={2}ms",this.__name,a.funcName,e)});d.u.obj.expose("h5.core.interceptor",{lapInterceptor:B,logInterceptor:B,errorInterceptor:function(a){var e=
null;try{e=a.proceed()}catch(l){d.settings.commonFailHandler&&K(d.settings.commonFailHandler)&&d.settings.commonFailHandler.call(null,l)}return e}});a(document).trigger("h5preinit");d.settings.aspects&&e(d.settings.aspects);d.log.configure()})();(function(){d.u.obj.expose("h5.env",{ua:function(d){function e(a,b){var c=x(a,"[^;)]*",b).split(" ");return 1===c.length?"":c[c.length-1]}function u(a,b){var c=x(a,"[^;) ]*",b).split("/");return 1===c.length?"":c[c.length-1]}function v(a,b){var c=x(a,"[^;) ]*",
b).split(":");return 1===c.length?"":c[c.length-1]}var A=!!d.match(/iPhone/i),f=!!d.match(/iPad/i),j=A||f,t=!!d.match(/android/i),s=!!d.match(/Windows Phone/i),w=!!d.match(/MSIE/)||!!d.match(/Trident/),i=!!d.match(/Firefox/i),p=!!d.match(/Chrome/i)||!!d.match(/CrMo/)||!!d.match(/CriOS/),E=!t&&!!d.match(/Safari/i)&&!p,z=!!d.match(/Webkit/i),q=!!d.match(/Opera/i),c=t&&!!d.match(/Safari/i)&&!p,b=!(!A&&!s&&!(c&&d.match(/Mobile/)&&!d.match(/SC-01C/)||t&&p&&d.match(/Mobile/)||d.match(/Fennec/i)||d.match(/Opera Mobi/i))),
h=!(!f&&!(c&&!d.match(/Mobile/)||t&&p&&!d.match(/Mobile/)||d.match(/SC-01C/)||d.match(/Fennec/i)||d.match(/Opera Tablet/i))),n=!b&&!h,F=null,J=null,g=function(b,c){return a.trim(d.substring(d.indexOf(b)+b.length,d.indexOf(c))).split("_")},x=function(b,c,i){return a.trim(d.match(!1===i?RegExp(b+c):RegExp(b+c,"i")))};if(A)J=g("iPhone OS","like"),F=parseInt(J[0]),J=J.join(".");else if(f)J=g("CPU OS","like"),F=parseInt(J[0]),J=J.join(".");else if(!t||!i)t?(J=e("Android"),F=parseInt(J.split(".")[0])):
s&&((J=e("Windows Phone OS"))||(J=e("Windows Phone")),F=parseInt(J.split(".")[0]));w&&q&&(w=!1);var da=g=null;if(j||t&&c)g=F,da=J;else{var L=null;w?L=e("MSIE",!1)||v("rv"):p?(L=u("Chrome",!1))||(L=u("CrMo",!1)):E?L=u("Version"):i?L=u("Firefox"):q&&((L=u("Version"))||(L=u("Opera")),L||(L=e("Opera")));L&&(g=parseInt(L.split(".")[0]),da=L)}return{osVersion:F,osVersionFull:J,browserVersion:g,browserVersionFull:da,isiPhone:A,isiPad:f,isiOS:j,isAndroid:t,isWindowsPhone:s,isIE:w,isFirefox:i,isChrome:p,isSafari:E,
isOpera:q,isAndroidDefaultBrowser:c,isSmartPhone:b,isTablet:h,isDesktop:n,isWebkit:z}}(navigator.userAgent)})})();(function(){function l(a){function d(){e=!0;f=this;q=j(arguments);if(Ka(a)||La(a))return a;var b=j(arguments);if(0<c.length)for(var h=0,n=c.length;h<n;h++){var p=b;p!==arguments&&(p=O(p));K(c[h])&&c[h].apply(this,p)}return a}var e=!1,f=null,q=null,c=[];a.progress=function(){for(var b=j(arguments),d=0,n=b.length;d<n;d++){var p=b[d];if(H(p))a.progress.apply(this,p);else if(K(p))if(e){var l=
q;l!==q&&(l=O(l));p.apply(f,l)}else c.push(p)}return this};a.notify=d;a.notifyWith=function(a,c){return!c?d.apply(a):d.apply(a,c)}}function B(a){if(!a)return!1;for(var a=O(a),d=0,e=a.length;d<e;d++)if(K(a[d]))return!0;return!1}function u(i,e){function E(a){e?e[a]&&(i[a]=e[a]):(h[a]=i[a],i[a]=function(){return function(){if(!c){var b=j(arguments);if("then"===a||"pipe"===a)b=b[1];B(b)&&(c=!0)}return i._h5UnwrappedCall.call(this,a,j(arguments))}}(a),n[a]=i[a])}function z(a){return function(){var h=d.settings.commonFailHandler;
!c&&h&&!b&&(i.fail.call(this,h),b=!0);return a.apply(this,arguments)}}if(i._h5UnwrappedCall)return i;var q=!!i.progress;!q&&!w(i)?l(i):e&&(i.progress=e.progress);var c=!1,b=!1,h={},n={};i._h5UnwrappedCall=e?e._h5UnwrappedCall:function(b,c){c=O(c);a.extend(i,h);var d=i[b].apply(this,c);a.extend(i,n);return d};for(var F=0,s=v.length;F<s;F++){var g=v[F];i[g]&&E(g)}i.pipe&&!e&&(i.pipe=function(){for(var a=d.async.deferred(),b=j(arguments),c=0,i=A.length;c<i;c++){var h=this;(function(b,c,d){function i(){if(e){var c=
b.apply(this,arguments);if(c&&K(c.promise)){u(c);c.done(a.resolve);c._h5UnwrappedCall("fail",a.reject);K(c.progress)&&c.progress(a.notify)}else a[d+"With"](this,[c])}else a[d+"With"](this,arguments)}var e=K(b);if(!e&&c==="fail")h._h5UnwrappedCall(c,i);else h[c](i)})(b[c],A[c],f[c])}return a.promise()},n.pipe=i.pipe);if(i.then&&!e){var x=i.then;i.then=t?i.pipe:function(){var a=arguments,b=x.apply(this,a);!q&&B(a[2])&&i.progress.call(i,a[2]);return b};n.then=i.then}i.reject&&(i.reject=e&&e.reject?e.reject:
z(i.reject));i.rejectWith&&(i.rejectWith=e&&e.rejectWith?e.rejectWith:z(i.rejectWith));if(i.promise)if(e&&e.promise)i.promise=e.promise;else{var da=i.promise;i.promise=function(){return u(da.apply(this,arguments),i)}}return i}var v=["fail","always","pipe","then"],A=["done","fail","progress"],f=["resolve","reject","notify"],j=d.u.obj.argsToArray,t=function(){var d=a.Deferred();return d!==d.then()}(),s=function(){var d=a.Deferred();return u(d)},w=function(a){return!!a&&a.done&&a.fail&&!a.resolve&&!a.reject};
d.u.obj.expose("h5.async",{deferred:s,when:function(){var i=j(arguments);1===i.length&&H(i[0])&&(i=i[0]);var e=i.length,f=d.async.deferred(),l=f.promise(),q=a.when.apply(a,i).done(function(){f.resolveWith(this&&this.promise&&this.promise()===q?f:this,j(arguments))}).fail(function(){f.rejectWith(this,j(arguments))});if(q.progress)q.progress(function(){f.notifyWith(this===q?l:this,j(arguments))});else{for(var c=[],b=0;b<e;b++)c[b]=void 0;for(var h=function(a){return function(b){c[a]=1<arguments.length?
j(arguments):b;f.notifyWith(l,c)}},b=0;b<e;b++){var n=i[b];n&&K(n.promise)&&n.progress&&(1<e?n.progress(h(b)):n.progress(function(){f.notifyWith(l,j(arguments))}))}}return l},isPromise:w,loop:function(d,f,j){H(d)||e(5E3);var l=s(),q="number"===a.type(j)?j:20,c=0,b=d.length,h,n=null,F=function(){if(c===b)l.resolve(d);else{var a=f.call(d,c,d[c],n);c++;w(a)?a.done(function(){h()}).fail(function(){l.reject(d)}):h()}},t=function(){setTimeout(function(){var a=c-1;0<c&&l.notify({data:d,index:a,value:d[a]});
F()},0)},g=!1;h=function(){g||(0===c%q?t():F())};var u=!1,n={resume:function(){!u&&g&&(g=!1,h())},pause:function(){g=!0},stop:function(){u=!0;l.resolve(d)}};t();return l.promise()}})})();(function(){function e(a,d){for(var l=0,w=A.length;l<w;l++){var i=A[l];a[i]&&(d[f[i]](a[i]),a[i]=void 0)}}function B(d,e,f){for(var l in e)if(e.hasOwnProperty(l)&&(f||!K(e[l]))&&-1===a.inArray(l,v))d[l]=e[l]}function u(a,d){B(this,a,!0);d.promise(this);var e=this.always;this.always=function(){e.apply(this,arguments);
return this}}var v=["error","success","complete"],A=["error","success","complete"],f={success:"done",error:"fail",complete:"always"};d.u.obj.expose("h5",{ajax:function(){function f(a,d,e){B(p,e);i.resolveWith(this,arguments)}function t(d,e,q){if(0===s.retryCount||!1===s.retryFilter.apply(this,arguments))B(p,d),i.rejectWith(this,arguments);else if(s.retryCount--,this.async){var c=this;setTimeout(function(){a.ajax(c).done(f).fail(t)},s.retryInterval)}else a.ajax(this).done(f).fail(t)}var s={},w=arguments;
x(w[0])?(a.extend(s,w[1]),s.url=w[0]):a.extend(s,w[0]);var s=a.extend({},d.settings.ajax,s),i=d.async.deferred();e(s,i);var w=a.ajax(s),p=new u(w,i);w.done(f).fail(t);return p}})})();(function(){function e(a,d){this.id=a;this.content=d}function B(a,d,e){this.url=a;this.path=d;this.content=e}function u(a){this._resourceKey=a}function v(a){a=0===a.indexOf("./")?a.slice(2):a;return(d.settings.res.baseUrl||"./")+a}function A(a,d,e){void 0===e&&K(a)&&(e=a,a=void 0);j.unshift({type:a,test:d,resolver:e})}
var f=d.async.deferred,j=[],t={};waitingInfoMap={};waitingForImmediateDeferred=[];waitingImmediateTimer=null;var s={MAX_CACHE:10,cache:{},cacheUrls:[],accessingUrls:{},append:function(a){this.cacheUrls.length>=this.MAX_CACHE&&this.clearCache(this.cacheUrls[0]);var d=a.url;this.cache[d]=a;this.cacheUrls.push(d)},clearCache:function(a,d){var e=ca(a);d||delete this.cache[e];for(var f=0,q=this.cacheUrls.length;f<q;f++)if(this.cacheUrls[f]===e){this.cacheUrls.splice(f,1);break}},clearAllCache:function(){this.cacheUrls=
[];this.cache={}},getResourceFromCache:function(a){var d=this.cache[a];this.clearCache(a,!0);this.cacheUrls.push(a);return d},loadResourceFromPath:function(a){var e=ca(a);if(this.accessingUrls[e])return this.accessingUrls[e];var j=f(),l=j.promise();this.accessingUrls[e]=l;var q=this;d.ajax(a,{dataType:"text"}).done(function(c,b,d){delete q.accessingUrls[e];c=new B(e,a,d.responseText);q.append(c);j.resolve(c)}).fail(function(c){delete q.accessingUrls[e];j.reject(R(17E3,[c.status,e],{url:e,path:a,error:c}))});
return l}};a.extend(u.prototype,{resolve:function(e){function f(b){for(var c=0,d=j.length;c<d;c++)if(!(e&&e!==j[c].type)){var h=j[c].test;if(!e&&h)if("regexp"===a.type(h)){if(!h.test(b))continue}else if(!1===h(b))continue;return j[c].resolver(b,e)}return!1}if(!H(this._resourceKey))return f(this._resourceKey);for(var l=this._resourceKey,t=[],q=0,c=l.length;q<c;q++){var b=f(l[q]);t.push(b)}var h=d.async.deferred();V(t,function(a){H(a)||(a=[a]);a.unshift(a.slice(0));h.resolveWith(h,a)},function(a){h.reject(a)});
return h.promise()},getKey:function(){return this._resourceKey}});var w={load:function(a){var d=ca(a);return s.cache[d]?f().resolve(s.getResourceFromCache(d)).promise():s.loadResourceFromPath(a)},clearCache:function(a){s.clearCache(a)},clearAllCache:function(){s.clearAllCache()}};A("namespace",null,function(a){var e=t[a]||d.u.obj.getByPath(a);if(e)return f().resolve(e).promise();if(waitingInfoMap[a])return waitingInfoMap[a].promise();var e=v(a.replace(/\./g,"/"))+".js",j=f(),l=d.settings.res.timeoutTime,
q=null;0<l&&(q=setTimeout(function(){waitingInfoMap[a]&&(delete waitingInfoMap[a],j.reject(R(17001,[a])))},l));waitingInfoMap[a]={deferred:j,timer:q};d.u.loadScript(e).done(function(){var c=t[a]||d.u.obj.getByPath(a);c&&waitingInfoMap[a]&&(t[a]=c,delete waitingInfoMap[a],clearTimeout(q),j.resolve(c))}).fail(function(c){clearTimeout(q);delete waitingInfoMap[a];j.reject(c)});return j.promise()});A("ejsfile",/.*\.ejs(\?.*$|$)/,function(d){var j=f();w.load(v(d)).done(function(d){var f=a(d.content).filter(function(){return 1===
this.nodeType&&1!==this.tagName.indexOf("/")}),q=[];0<f.not('script[type="text/ejs"]').length?j.reject(R(7011,null,{url:d.url,path:d.path})):(0===f.length&&j.reject(R(7001,null,{url:d.url,path:d.path})),f.each(function(){var c=a.trim(this.id);c||j.reject(R(7002,null,{url:d.url,path:d.path}));var b=a.trim(this.innerHTML);q.push(new e(c,b))}),j.resolve({url:d.url,path:d.path,templates:q}))}).fail(function(a){var d=a.detail,d=R(7003,[d.error.status,d.url],d);a.code=d.code;a.message=d.message;a.detail=
a.detail;j.reject(a)});return j.promise()});A("jsfile",/.*\.js(\?.*$|$)/,function(a){return d.u.loadScript(v(a))});A("cssfile",/.*\.css(\?.*$|$)/,function(a){var d=document.getElementsByTagName("head")[0],e=document.createElement("link");e.type="text/css";e.rel="stylesheet";e.href=v(a);d.appendChild(e);return f().resolve(e).promise()});d.u.obj.expose("h5.res",{dependsOn:function(a){return new u(a)},addResolver:A,isDependency:function(a){return a instanceof u},urlLoader:w,resolvers:j,register:function(a,
e,f,j){f&&(j?d.u.obj.expose(j,e):d.u.obj.expose(a,e));t[a]=e;if(f=waitingInfoMap[a])delete waitingInfoMap[a],a=f.deferred,(f=f.timer)&&clearTimeout(f),waitingForImmediateDeferred.push({dfd:a,value:e}),waitingImmediateTimer||(waitingImmediateTimer=setTimeout(function(){waitingImmediateTimer=null;for(var a=waitingForImmediateDeferred.splice(0),c=0,b=a.length;c<b;c++)a[c].dfd.resolve(a[c].value)},0))},get:function(a){return d.res.dependsOn(a).resolve()}})})();(function(){function l(a){null!=a.style.transform&&
(a.style.transform="");null!=a.style.mozTansform&&(a.style.mozTansform="");null!=a.style.webkitTansform&&(a.style.webkitTansform="")}function B(a,b,c,d,k){for(var h in c)h in Ea&&e(ra,[k,h],{controllerDefObj:c})}function u(b,c){function d(h,m){-1!==a.inArray(h,m)&&e(k,[c],{controllerDefObj:b});p(h,function(a){d(a,m.concat([h]))},!0)}d(b,[])}function v(b){function c(d,k){-1!==a.inArray(d,k)&&e(G,[b.__name],{logicDefObj:b});E(d,function(a){c(a,k.concat(d))})}c(b,[])}function A(b,c,d){null==b&&e(sa,
[d],{controllerDefObj:c});!x(b)&&"object"!==typeof b&&e(lb,[d],{controllerDefObj:c});b=a(b);0===b.length&&e(mb,[d],{controllerDefObj:c});1<b.length&&e(Ua,[d],{controllerDefObj:c});b[0].nodeType!==Ma&&b[0].nodeType!==$&&e(nb,[d],{controllerDefObj:c})}function f(b){b=a(b);this._controller=null;if(0===b.length)this._targetElement=null;else{1<b.length?e(Ua):b[0].nodeType!==Ma&&b[0].nodeType!==$?e(nb):this._targetElement=b[0];var c=d.core.controllerManager.getController(this._controller);1<c.length&&e();
1==c.length?this._controller=controllres[0]:0===c.length&&(b=b.data("h5-controller"),this._controller=d.res.dependsOn(b))}}function j(a,b,c,d,k){this.controller=a;this.event=b;this.evArg=c;this.selector=d;this.selectorType=k}function t(a){if(!ba(this)&&this.__controllerContext.executeListeners)return a.proceed()}function s(a,b,c){var k;k=a.__name;var e=[],h=d.settings.aspects;if(h&&0!==h.length)for(var h=O(h),m=h.length-1;-1<m;m--){var f=h[m];if(!f.target||f.compiledTarget.test(k)){var o=f.interceptors;
if(!f.pointCut||f.compiledPointCut.test(b))if(H(o))for(f=o.length-1;-1<f;f--)e=e.concat(o[f]);else e.push(o)}}k=e;c&&k.push(t);return w(a[b],b,k)}function w(a,b,c){for(var d=function(a,b,c){return function(){var ya=this;return c.call(ya,{target:ya,func:a,funcName:b,args:arguments,proceed:function(){return a.apply(ya,this.args)}})}},k=0,e=c.length;k<e;k++)a=d(a,b,c[k]);return a}function i(a,b,c){if(c&&a===Ga)return c.rootElement;for(var k=["window","document","navigator"],e=0,h=k.length;e<h;e++){var m=
k[e];if(a===m||ob(a,m+"."))return d.u.obj.getByPath(a,Z(b))}return c&&ob(a,"this.")?d.u.obj.getByPath(a.slice(5),c):a}function p(a,b,c){if(c){var d=za.get(a.__name);if(d){c=0;for(e=d.childControllerProperties.length;c<e;c++){var k=d.childControllerProperties[c];if((h=a[k])&&!1===b(a[k],a,k))return!1}}else for(k in a){var d=a,e=k,h=c,m=d[e];if(Va(e,pb)&&"rootController"!==e&&"parentController"!==e&&m&&(h||m.__controllerContext&&!m.__controllerContext.isRoot&&(!m.parentController||m.parentController===
d))&&!1===b(a[k],a,k))return!1}}else if(!ba(a))for(var k=a.__controllerContext.childControllers,c=0,e=k.length;c<e;c++){var h=k[c];if(!1===b(h,a))return!1}}function E(a,b){var c=za.get(a.__name);if(c)for(var d=0,k=c.logicProperties.length;d<k;d++){var e=c.logicProperties[d];if(!1===b(a[e],a,e))return!1}else for(e in a)if(a.hasOwnProperty(e)&&Va(e,gb)&&!1===b(a[e],a,e))return!1}function z(a,b,c,d){return!1===b.call(this,a,c,d)?!1:p(a,function(a,c,d){if(z(a,b,c,d)===false)return false})}function q(a,
b,c,d){if(!1===p(a,function(a,c,d){if(!a||!1===q(a,b,c,d))return!1})||!1===b.call(this,a,c,d))return!1}function c(a,b){var c=[];p(a,function(a){(a=a[b])&&c.push(a)});return c}function b(b,c,k){function e(b){var c=b.handler,ya=b.controller;b.originalHandler=c;b.handler=function(){var k=!b.isNativeBind&&1===d.settings.listenerElementType?a(this):this;c.call(ya,W(b,arguments),k)}}var h=c.selector,m=c.eventName;switch(m){case "mousewheel":k=ea(b,h,m,k);break;case Ha:case qb:case Na:k=xb(b,h,m,k);break;
default:k=Fa(b,h,m,k)}H(k)||(k=[k]);h=0;for(m=k.length;h<m;h++){var f=k[h];e(f);f.isBindRequested=c.isBindRequested;f.isGlobal=c.isGlobal;f.bindTarget=c.bindTarget;f.controller=b}return k}function h(b,c){var k=b.controller,e=k.rootElement,h=b.selector,m=b.eventName,f=b.handler,o=b.isBindRequested,q=b.isGlobal;b.bindTarget?(b.evSelectorType=Wa.SELECTOR_TYPE_OBJECT,Oa(b)):q?(k=i(h,c,k),o||!x(k)?(b.evSelectorType=Wa.SELECTOR_TYPE_OBJECT,b.bindTarget=x(k)?a(k):k,Oa(b)):(b.evSelectorType=Wa.SELECTOR_TYPE_GLOBAL,
a(c).delegate(k,m,f)),b.evSelector=k):(b.evSelectorType=Wa.SELECTOR_TYPE_LOCAL,b.evSelector=h,o?(b.bindTarget=a(h,e),Oa(b)):a(e).delegate(h,m,f));b.isBindCanceled||(b.controller.__controllerContext.boundHandlers.push(b),va&&m===Ha&&null!=d.settings.trackstartTouchAction&&(q?a(b.evSelector,c):a(b.evSelector,e)).each(function(){this.style[ga]=d.settings.trackstartTouchAction}))}function n(b,c,d){var k=b.controller,e=k.rootElement,h=b.selector,m=b.handler,f=b.eventName,o=b.isGlobal;if(b.bindTarget)c=
b.bindTarget,e=b.eventName,h=b.handler,b.isNativeBind?c.removeEventListener(e,h):a(c).unbind(e,h);else if(o){if(null==Z(c))return;a(c).undelegate(h,f,m)}else a(e).undelegate(h,f,m);d||(d=k.__controllerContext.boundHandlers,d.splice(a.inArray(b,d),1))}function F(a,b){z(a,function(a){a.__controllerContext.executeListeners=b})}function J(a,b,c,d){return function(){var k=null,e=a[b],h=a.__name;if(!d&&e)try{k=a[b]({args:a.__controllerContext.args})}catch(m){ia(a,m)}k&&K(k.done)&&K(k.fail)?k.done(c).fail(function(){var b=
R(zb,h,Ia(arguments));ia(a.rootController,null,b)}):c()}}function g(a,b){z(a,function(a){if(!ja(a)){var d,k,e=!1;"__init"===b?(e=a.isInit,d=na(a),k=[a.preInitPromise],a.parentController&&k.push(a.parentController.initPromise)):"__postInit"===b?(e=a.isPostInit,d=da(a),k=c(a,"postInitPromise")):(e=a.isReady,d=L(a),k=c(a,"readyPromise"));V(k,J(a,b,d,e))}})}function na(b){return function(){function c(){!d.length&&function(){var a=!0;z(b.rootController,function(b){return a=b.isInit});return a}()&&g(b.rootController,
"__postInit")}if(!ka(b)){var d=b.__controllerContext.childControllers;if(b.isInit)c();else{b.isInit=!0;var k=b.__controllerContext.initDfd;delete b.__controllerContext.templatePromise;delete b.__controllerContext.preInitDfd;delete b.__controllerContext.initDfd;var e=b.rootElement;try{var h=b.__meta,m;for(m in h)-1!==a.inArray(b[m],d)&&(b[m].__controllerContext.metaRootElement=h[m]&&h[m].rootElement);b.__controllerContext.isExecutedSetupRootElement=!0;p(b,function(a){var c=a.__controllerContext.metaRootElement;
delete a.__controllerContext.metaRootElement;a.__controllerContext.isExecutedSetupRootElement||(a.__controllerContext.isExecutedSetupRootElement=!0,c=c?ha(c,a,b):e,A(c,a.__controllerContext.controllerDef,a.__name),a.rootElement=c,a.view.__controller=a)})}catch(f){ia(b,f);return}k.resolveWith(b);ka(b)||c()}}}}function da(c){return function(){if(!ka(c))if(c.isPostInit)c.__controllerContext.isRoot&&P(c);else{c.isPostInit=!0;var d=c.__controllerContext.postInitDfd;delete c.__controllerContext.postInitDfd;
d.resolveWith(c);if(!ka(c)&&c.__controllerContext.isRoot){var d=c.__meta,k=c.__controllerContext.childControllers,e;for(e in d)-1!==a.inArray(c[e],k)&&(c[e].__controllerContext.metaUseHandlers=d[e]&&d[e].useHandlers);z(c,function(a){metaUseHandlers=a.__controllerContext.metaUseHandlers;delete a.__controllerContext.metaUseHandlers;if(!a.__controllerContext.isExecutedBind&&(a.__controllerContext.isExecutedBind=!0,!1!==metaUseHandlers)){var c=a.__controllerContext.cache.bindMap,d=N(a.rootElement),k;
for(k in c)for(var e=b(a,c[k],a[k]),ya=0,m=e.length;ya<m;ya++)h(e[ya],d)}});P(c)}}}}function L(b){return function(){if(!ka(b)&&!b.isReady){b.isReady=!0;var c=b.__controllerContext.readyDfd;delete b.__controllerContext.readyDfd;c.resolveWith(b);ka(b)||b.__controllerContext.isRoot&&b.rootElement&&b.isInit&&b.isPostInit&&b.isReady&&a(b.rootElement).trigger("h5controllerready",b)}}}function ma(b,c){if(!x(b))return a(b);var d=a.trim(b);return rb.test(d)?(d=a.trim(d.substring(1,d.length-1)),a(i(d,N(c.rootElement),
c))):a(c.rootElement).find(b)}function Fa(a,b,c,d){return{controller:a,selector:b,eventName:c,handler:d}}function ea(a,b,c,d){return{controller:a,selector:b,eventName:typeof document.onmousewheel===la?"DOMMouseScroll":c,handler:function(b){var c=b.event;null==c.wheelDelta&&c.originalEvent&&null!=c.originalEvent.wheelDelta&&(c.wheelDelta=c.originalEvent.wheelDelta);null==c.wheelDelta&&c.originalEvent&&null!=c.originalEvent.detail&&(c.wheelDelta=40*-c.originalEvent.detail);d.call(a,b)}}}function xb(b,
c,d,k){function e(a,b){for(var c in a)a.hasOwnProperty(c)&&!b[c]&&"target"!==c&&"currentTarget"!==c&&"originalEvent"!==c&&"liveFired"!==c&&(b[c]=a[c]);b.h5DelegatingEvent=a}var h=typeof document.ontouchstart!==la;if(d!==Ha)return Fa(b,c,d,function(b){var c=b.event.h5DelegatingEvent.type;if("mousemove"===c||"mouseup"===c){var c=b.event,d=a(c.currentTarget).offset()||{left:0,top:0};c.offsetX=c.pageX-d.left;c.offsetY=c.pageY-d.top}k.apply(this,arguments)});var m=a(N(b.rootElement));return function(){function f(c,
d,k){return function(h){var o;a:{switch(c){case "touchstart":case "mousedown":o=Ha;break a;case "touchmove":case "mousemove":o=qb;break a;case "touchend":case "mouseup":o=Na;break a}o=void 0}var Za=o===Ha;if(!Za||!n){var g=0===h.event.type.indexOf("touch");g&&xa(h.event,c);var r=new a.Event(o);e(h.event,r);var i=h.event.target;d&&(i=d);k&&k(r);var j=h.event.originalEvent||h.event;Za&&-1===a.inArray(j,Aa)&&(Aa=[],Ja=[]);var G=a.inArray(j,Aa);-1===G&&(G=Aa.push(j)-1,Ja[G]=!1);if(!Ja[G]&&(!g||n||Za))Ja[G]=
!0,a(i).trigger(r,h.evArg),n=!0;if(h.event.currentTarget===document&&(o===Na&&(Aa=[],Ja=[]),-1!==a.inArray(j,Aa)))Aa.splice(G,1),Ja.splice(G,1);if(Za&&n){r.h5DelegatingEvent.preventDefault();o=r.target;var y=r.clientX,Ca=r.clientY,Q=g?"touchmove":"mousemove",ra=g?"touchend":"mouseup",yb=f(Q,o,function(a){var b=a.clientX,c=a.clientY;a.dx=b-y;a.dy=c-Ca;y=b;Ca=c}),D=f(ra,o),l=function(a){h.event=a;h.evArg=M(arguments);yb(h)},I=function(a){h.event=a;h.evArg=M(arguments);D(h)},Ba=g?a(o):m;q=function(){Aa=
[];Ja=[];Ba.unbind(Q,l);Ba.unbind(ra,I);if(!g&&b.rootElement!==document){a(b.rootElement).unbind(Q,l);a(b.rootElement).unbind(ra,I)}};Ba.bind(Q,l);Ba.bind(ra,I);!g&&b.rootElement!==document&&(a(b.rootElement).bind(Q,l),a(b.rootElement).bind(ra,I))}else o===Na&&(q(),n=!1)}}}function o(a){return{controller:b,selector:c,eventName:a,handler:f(a)}}var q=null,n=!1,g=[Fa(b,c,d,k)];h&&g.push(o("touchstart"));g.push(o("mousedown"));return g}()}function T(b){if("svg"!==b.tagName.toLowerCase()||qa())return a(b).offset();
var c=N(b).createElementNS(pa,"rect"),d=b.viewBox,k=d.baseVal.y;c.setAttribute("x",d.baseVal.x);c.setAttribute("y",k);c.setAttribute("width",1);c.setAttribute("height",1);l(c);b.appendChild(c);d=a(c).offset();b.removeChild(c);return d}function xa(a,b){var c=a.originalEvent;if(c){var d="touchend"===b||"touchcancel"===b?c.changedTouches[0]:c.touches[0],k=d.pageX,e=d.pageY;a.pageX=c.pageX=k;a.pageY=c.pageY=e;a.screenX=c.screenX=d.screenX;a.screenY=c.screenY=d.screenY;a.clientX=c.clientX=d.clientX;a.clientY=
c.clientY=d.clientY;d=a.target;if(d.ownerSVGElement)d=d.farthestViewportElement;else if(d===window||d===document)d=document.body;d=T(d);e-=d.top;a.offsetX=c.offsetX=k-d.left;a.offsetY=c.offsetY=e}}function M(a){return 3>a.length?a[1]:Ia(a).slice(1)}function W(a,b){var c=null,d=null;b&&(c=b[0],d=M(b));var k=c;if(k&&null==k.offsetX&&null==k.offsetY&&k.pageX&&k.pageY){var e=k.target;if(e.ownerSVGElement)e=e.farthestViewportElement;else if(e===window||e===document)e=document.body;e=T(e);k.offsetX=k.pageX-
e.left;k.offsetY=k.pageY-e.top}return new j(a.controller,c,d,a.evSelector,a.evSelectorType)}function fb(a){z(a,function(a){a.rootElement=null;a.view.__controller=null})}function ha(b,c,d){null==b&&e(sa,[c.__name]);!x(b)&&"object"!==typeof b&&e(lb,[c.__name]);b=d?ma(b,d):a(b);0===b.length&&e(mb,[c.__name]);1<b.length&&e(Ua,[c.__name]);return b.get(0)}function P(b){var c=b.__controllerContext.managed,d=Pa.controllers;-1===a.inArray(b,d)&&!1!==c&&d.push(b);!1!==c&&a(b.rootElement).trigger("h5controllerbound",
b);g(b,"__ready")}function y(a,b){!1===b?g(a,"__init"):setTimeout(function(){g(a,"__init")},0)}function S(a,b){z(a,function(a){var c=ta();c.resolve();var d=a.__controllerContext;d.templatePromise=c.promise();d.initDfd=ta();d.postInitDfd=ta();d.readyDfd=ta();d.isUnbinding=!1;d.isUnbinded=!1;d.isExecutedBind=!1;d.isExecutedSetupRootElement=!1;d.args=b;a.initPromise=d.initDfd.promise();a.postInitPromise=d.postInitDfd.promise();a.readyPromise=d.readyDfd.promise();a.isInit=!1;a.isPostInit=!1;a.isReady=
!1})}function aa(b,c){var k=null,e=c;a.isPlainObject(e)?k=e.target:e={};k=k?ma(k,b):b.rootElement;return d.ui.indicator.call(b,k,e)}function C(a,b){var c=[],d=null;q(a,function(a){if(a[b]&&K(a[b])){try{var k=a[b]()}catch(e){d=d||e}sb(k)&&c.push(k)}});if(d)throw d;return c}function ia(a,b,c){function d(){var a=b||c||f||n;q(e,function(b){b.view&&b.view.__view&&b.view.__view.clear();if(a)b.__controllerContext.isDisposed=1;else for(var c in b)b.hasOwnProperty(c)&&(b[c]=null)});n?g.rejectWith(e,[n]):g.resolveWith(e);
if(a&&(Pa.dispatchEvent({type:"lifecycleerror",detail:a,rootController:e}),b||f))throw b||f;}function k(){n=f||R(Ab,e.__name,Ia(arguments));d()}var e=a.__controllerContext&&(a.__controllerContext.isRoot?a:a.rootController);if(e){if(!ja(e)){e.__controllerContext.isDisposing=1;try{$a(e,c||b)}catch(h){b=b||h}var m,f=null;try{m=C(e,"__dispose")}catch(o){b=b||o,f=f||o}var g=e.deferred(),n=null;f?k():V(m,d,k,!0);return g.promise()}}else if(b)throw b;}function $a(b,c){if(!ka(b)){b.__controllerContext.isUnbinding=
1;ab(b,c);var d;try{C(b,"__unbind")}catch(k){d=k}z(b,function(a){var b=a.rootElement;if(b){for(var b=N(b),c=a.__controllerContext.boundHandlers,d=0,k=c.length;d<k;d++)n(c[d],b,!0);a.__controllerContext.boundHandlers=[]}});b.__controllerContext.unbindList={};Pa.controllers=a.grep(Pa.controllers,function(a){return a!==b});b.isPostInit&&!1!==b.__controllerContext.managed&&a(b.rootElement).trigger("h5controllerunbound",b);fb(b);b.__controllerContext.isUnbinded=1;if(d)throw d;}}function ua(a,b){return b.view.__view.isAvailable(a)?
b.view.__view:b.parentController?ua(a,b.parentController):d.core.view}function ba(a){return!a.__controllerContext||a.__controllerContext.isDisposed}function ja(a){return ba(a)||a.__controllerContext.isDisposing}function ka(a){return ba(a)||a.__controllerContext.isUnbinding||a.__controllerContext.isUnbinded}function ab(a,b){var c=["postInitDfd","readyDfd"],d=[];z(a,function(a){d.push(a);var c=a.__controllerContext.initDfd;c&&!Ka(c)&&!La(c)&&c.rejectWith(a,[b])});for(var k=0,e=c.length;k<e;k++)for(var h=
c[k],m=d.length-1;0<=m;m--){var f=d[m],o=f.__controllerContext[h];o&&!Ka(o)&&!La(o)&&o.rejectWith(f,[b])}}function bb(a,b){for(var c=a.childNodes,d=0,k=c.length;d<k;d++){var e=c[d];if(1===e.nodeType){if(e=bb(e,b))return e}else if(8===e.nodeType){var h=e.nodeValue;if(0===h.indexOf(Qa)){var m=h.indexOf("}");if(-1!==m&&(h=h.slice(0,m).match(/id="([A-Za-z][\w-:\.]*)"/))&&h[1]===b)return e}}}return null}function o(a){var b=this;return function(){return a.apply(b,arguments)}}function I(a){var b=this;return function(){var c=
d.u.obj.argsToArray(arguments);c.unshift(this);return a.apply(b,c)}}function oa(a,b,c){function k(h){d.u.obj.getByPath("h5.core.view")||e(Bb);c=H(c)?c:[c];for(var m=[],f=0,o=c.length;f<o;f++){var q=Ra(c[f])?c[f]:d.res.dependsOn(c[f]);m.push(q.resolve("ejsfile"))}V(m,function(c){for(var c=H(c)?c:[c],d=0,k=c.length;d<k;d++)for(var e=c[d].templates,h=0,m=e.length;h<m;h++)try{a.view.__view.register(e[h].id,e[h].content)}catch(f){b.reject(f)}b.resolve()},function(a){var c=a.detail.error.status;h===d.settings.dynamicLoading.retryCount||
0!==c&&c!==kb?setTimeout(function(){b.reject(a)},0):setTimeout(function(){k(++h)},d.settings.dynamicLoading.retryInterval)})}k(0)}function Xa(b,c,d,k){var h=x(b),m=h?null:b,b=h?a.trim(b):null,c=a.trim(c),f=!h||rb.test(b),o=Sa.test(c);o&&(c=a.trim(a.trim(c.substring(1,c.length-1))));h&&f&&(b=a.trim(b.substring(1,b.length-1)),"this"===b&&e(Ba,[d.__name],{controllerDef:d}));return{selector:b,bindTarget:m,isGlobal:f,isBindRequested:o,eventName:c,propertyKey:k}}function m(){this.logicProperties=[];this.eventHandlerProperties=
[];this.functionProperties=[];this.otherProperties=[];this.bindMap={};this.childControllerProperties=[]}function r(b){var c=new m,d=c.logicProperties,k=c.eventHandlerProperties,h=c.functionProperties,f=c.otherProperties,o=c.bindMap,q=c.childControllerProperties,g={},n;for(n in b)if(-1!==n.indexOf(" ")&&K(b[n])){k.push(n);var r=a.trim(n),i=r.lastIndexOf(" "),r=Xa(r.substring(0,i),r.substring(i+1,r.length),b,n),i=r.selector,G=r.eventName,j=r.isGlobal,y=r.isBindRequested;g[i]||(g[i]={});g[i][G]||(g[i][G]=
{});g[i][G][j]||(g[i][G][j]={});g[i][G][j][y]?e(Ca,[b.__name,i,G],{controllerDef:b}):g[i][G][j][y]=1;o[n]=r}else Va(n,pb)&&b[n]&&!K(b[n])?q.push(n):Va(n,gb)&&b[n]&&!K(b[n])?d.push(n):K(b[n])?h.push(n):f.push(n);return c}function Q(){this.logicProperties=[];this.functionProperties=[]}function D(a){var b=new Q,c=b.functionProperties,d=b.logicProperties,k;for(k in a)a.hasOwnProperty(k)&&Va(k,gb)?d.push(k):K(a[k])&&c.push(k);return b}function cb(b,c){function d(b,c,k){c=c.__logicContext.waitingPromises=
c.__logicContext.waitingPromises||[];-1===a.inArray(b,c)&&(c.push(b),b.done(k))}function k(h){function m(){if(!h.__logicContext.isCalledReady){var k=!0;E(h,function(a){return k=a.__logicContext.isReady});if(k){var f=K(h.__ready)&&h.__ready();h.__logicContext.isCalledReady=!0;sb(f)?(e.push(f),f.done(function(){h.__logicContext.isReady=!0;e.splice(a.inArray(f,e),1);h.__logicContext.waitingPromises=null;h===b&&c.resolveWith(h)})):(h.__logicContext.isReady=!0,h.__logicContext.waitingPromises=null,h===
b&&c.resolveWith(h))}else for(var o=0,n=e.length;o<n;o++)d(e[o],h,m)}}h.__logicContext.isReady=!1;h.__logicContext.isCalledReady=!1;E(h,k);m()}var e=[];k(b)}function hb(a,b){if(a===b)return!0;var c=ib(a),d=ib(b);if(!c&&!d)return!1;c=c?a.toArray():[a];d=d?b.toArray():[b];if(c.length!==d.length)return!1;for(var k=0,e=c.length;k<e;k++)if(c[k]!==d[k])return!1;return!0}function U(a,b){(!a||!a.rootElement)&&e(Cb,b)}function X(a,b){(!a||ba(a))&&e(Db,b)}function Oa(b){var c=b.bindTarget,d=b.eventName,k=b.handler;
c&&typeof c.nodeType!==la||jb(c)||ib(c)?a(c).bind(d,k):!c||!c.addEventListener?b.isBindCanceled=!0:(c.addEventListener(d,k),b.isNativeBind=!0)}function Ya(a){this.__controller=a;d.u.obj.getByPath("h5.core.view")&&(this.__view=d.core.view.createView())}function wa(a,b,c,k,e){this.__name=b;this.__templates=null;this.rootElement=a;this.__controllerContext={executeListeners:!0,isRoot:e,boundHandlers:[],controllerDef:c};this.__controllerContext.args=k?k:null;this.isReady=this.isPostInit=this.isInit=!1;
this.readyPromise=this.postInitPromise=this.initPromise=this.preInitPromise=this.parentController=this.rootController=null;this.log=d.log.createLogger(b);this.view=new Ya(this)}function ca(){this.rootElement=document;this.controllers=[];a(document).bind(tb,function(a,b){null==b.target&&(b.target=document);b.indicator=aa(this,b);a.stopPropagation()})}function ub(){this._init()}function db(b,c,d,k){var h=!k||!k.isInternal;if(!h&&ba(k.rootController))return null;var m=c.__name;(!x(m)||0===a.trim(m).length)&&
!Ra(c)&&e(Ta,null,{controllerDefObj:c});d&&!a.isPlainObject(d)&&e(Da,[m],{controllerDefObj:c});c.__controllerContext&&e(Eb,null,{controllerDefObj:c});var f=za.get(m);f||B(h,b,c,d,m);h&&u(c,m);f||(f=r(c),za.register(m,f));h&&A(b,c,m);var o=new wa(b?a(b).get(0):null,m,c,d,h),n=h?o:k.rootController,q=ta(),m=q.promise().fail(eb),g=ta(),i=g.promise().fail(eb),G=ta(),j=G.promise().fail(eb),Ca=ta(),Q=Ca.promise(),ra=k&&k.async;!1===ra&&(q.resolve(),g.resolve(),G.resolve(),Ca.resolve());h||Q.fail(eb);b=o.__controllerContext;
b.cache=f;b.preInitDfd=q;b.initDfd=g;b.postInitDfd=G;b.readyDfd=Ca;o.preInitPromise=m;o.initPromise=i;o.postInitPromise=j;o.readyPromise=Q;b.childControllers=[];for(var D=h?[]:k.promisesForTriggerInit,g=0,i=f.logicProperties.length;g<i;g++)G=f.logicProperties[g],m=c[G],Ra(m)?(j=m.resolve("namespace"),D.push(j),j.done(function(b,c){return function(d){d=Y(d);o[b]=d;D.splice(a.inArray(c,D),1);D.push(d.readyPromise);d.readyPromise.done(function(b){return function(){D.splice(a.inArray(b,D),1)}}(d.readyPromise))}}(G,
j))):o[G]=Y(m);m=a.extend(!0,{},c);c=c.__templates;g=ta();i=g.promise();Ra(c)||c&&0<c.length?oa(o,g,c):g.resolve();i.done(function(){ja(o)||q.resolveWith(o)}).fail(function(a){q.rejectWith(o,[a]);ia(o,null,a)});g=0;for(i=f.eventHandlerProperties.length;g<i;g++)G=f.eventHandlerProperties[g],o[G]=s(m,G,!0);g=0;for(i=f.functionProperties.length;g<i;g++)G=f.functionProperties[g],o[G]=s(m,G);g=0;for(i=f.otherProperties.length;g<i;g++)G=f.otherProperties[g],o[G]=m[G];b.managed=k&&k.managed;try{if(o.__construct&&
o.__construct({args:o.__controllerContext.args}),ja(o))return null}catch(l){return ia(n,l),null}h?(o.rootController=o,o.parentController=null):(o.parentController=k.parentController,o.rootController=k.rootController);g=0;for(i=f.childControllerProperties.length;g<i;g++)if(G=f.childControllerProperties[g],k=m[G],Ra(k))j=k.resolve("namespace"),D.push(j),j.done(function(b,c){return function(k){k=db(null,a.extend(true,{},k),d,{isInternal:true,parentController:o,rootController:n,promisesForTriggerInit:D,
async:ra});if(k==null)return null;o[b]=k;o.__controllerContext.childControllers.push(k);D.splice(a.inArray(c,D),1)}}(G,j));else{k=db(null,a.extend(!0,{},m[G]),d,{isInternal:!0,parentController:o,rootController:n});if(null==k)return null;o.__controllerContext.childControllers.push(k);o[G]=k}if(h){var I=function(){D.length===0?y(o,ra):V(D,I)};V(D,I)}return o}function Y(b){function c(b,k){var h=b.__name;(!x(h)||0===a.trim(h).length)&&e(Fb,null,{logicDefObj:b});b.__logicContext&&e(Gb,null,{logicDefObj:b});
var m=za.get(h);m||(k&&v(b),m=D(b));for(var g=a.extend(!0,{},b),n=m.functionProperties,q=0,i=n.length;q<i;q++){var G=n[q];g[G]=s(g,G)}g.deferred=ta;g.log=d.log.createLogger(h);g.__logicContext={logicDef:b};g.own=o;g.ownWithOrg=I;za.register(h,m);K(g.__construct)&&g.__construct();h=m.logicProperties;q=0;for(i=h.length;q<i;q++)G=h[q],m=g[G],Ra(m)?(m=m.resolve(),f.push(m),m.done(function(b,d){return function(k){g[b]=c(k);f.splice(a.inArray(d,f),1)}}(G,m))):g[G]=c(m);return g}function k(){0===f.length?
cb(g,h):V(f,k)}var h=d.async.deferred(),m=h.promise(),f=[],g=c(b,!0);g.readyPromise=m;V(f,k);return g}var pa="http://www.w3.org/2000/svg",Wa={SELECTOR_TYPE_LOCAL:1,SELECTOR_TYPE_GLOBAL:2,SELECTOR_TYPE_OBJECT:3},pb="Controller",gb="Logic",Ha="h5trackstart",qb="h5trackmove",Na="h5trackend",Ga="rootElement",tb="triggerIndicator",rb=/^\{.*\}$/,Sa=/^\[.*\]$/,Qa="{h5view ",sa=6001,mb=6003,Ua=6004,Ta=6006,Da=6007,Eb=6008,k=6009,G=6010,ra=6011,Ba=6012,Ca=6013,Fb=6017,Gb=6018,Bb=6029,lb=6030,zb=6033,nb=6034,
Cb=6035,Db=6036,Ab=6038,ta=d.async.deferred,sb=d.async.isPromise,ob=d.u.str.startsWith,Va=d.u.str.endsWith,Hb=d.u.str.format,Ia=d.u.obj.argsToArray,ib=d.u.obj.isJQueryObject,Ra=d.res.isDependency,eb=function(){},Pa,za,Aa=[],Ja=[],ga="",va=function(){var a=document.createElement("div");return typeof a.style.touchAction!==la?(ga="touchAction",!0):typeof a.style.msTouchAction!==la?(ga="msTouchAction",!0):!1}(),qa=function(){var b=null;return function(){if(null!=b)return b;var c=document.createElementNS(pa,
"svg");c.setAttribute("width",1);c.setAttribute("height",1);var d=document.createElementNS(pa,"rect");d.setAttribute("x",1);d.setAttribute("y",1);d.setAttribute("width",1);d.setAttribute("height",1);l(d);a(function(){document.body.appendChild(c);var a=c.getBoundingClientRect().top;c.appendChild(d);b=a===c.getBoundingClientRect().top;document.body.removeChild(c)});return b}}();a.extend(j.prototype,Wa);a.extend(Ya.prototype,{get:function(a,b){U(this.__controller,"view#get");return ua(a,this.__controller).get(a,
b)},update:function(a,b,c){U(this.__controller,"view#update");a=ma(a,this.__controller);return ua(b,this.__controller).update(a,b,c)},append:function(a,b,c){U(this.__controller,"view#append");a=ma(a,this.__controller);return ua(b,this.__controller).append(a,b,c)},prepend:function(a,b,c){U(this.__controller,"view#prepend");a=ma(a,this.__controller);return ua(b,this.__controller).prepend(a,b,c)},load:function(a){U(this.__controller,"view#load");return this.__view.load(a)},register:function(a,b){U(this.__controller,
"view#register");this.__view.register(a,b)},isValid:function(a){U(this.__controller,"view#isValid");return this.__view.isValid(a)},isAvailable:function(a){U(this.__controller,"view#isAvailable");return ua(a,this.__controller).isAvailable(a)},clear:function(a){U(this.__controller,"view#clear");this.__view.clear(a)},getAvailableTemplates:function(){U(this.__controller,"view#getAvailableTemplates");return this.__view.getAvailableTemplates()},bind:function(b,c){U(this.__controller,"view#bind");var d=
b;if(x(b)&&0===b.indexOf("h5view#")){for(var k=bb(this.__controller.rootElement,b.slice(7)),d=k.nodeValue,d=d.slice(d.indexOf("}")+1),e=a("<div>").append(d),d=[],h=e[0].childNodes,m=0,f=h.length;m<f;m++)d.push(h[m]);e.empty();e=document.createDocumentFragment();m=0;for(f=d.length;m<f;m++)e.appendChild(d[m]);k.parentNode.insertBefore(e,k.nextSibling)}return this.__view.bind(d,c)}});a.extend(wa.prototype,{$find:function(b){X(this,"$find");U(this,"$find");return a(this.rootElement).find(b)},deferred:function(){X(this,
"deferred");return ta()},trigger:function(b,c){X(this,"trigger");U(this,"trigger");var d=x(b)?a.Event(b):b;a(this.rootElement).trigger(d,c);return d},own:function(){X(this,"own");return o.apply(this,Ia(arguments))},ownWithOrg:function(){X(this,"ownWithOrg");return I.apply(this,Ia(arguments))},bind:function(a,b){X(this,"bind");this.__controllerContext.isRoot||e(6031);this.rootElement=ha(a,this);this.view.__controller=this;S(this,b?b:null);y(this);return this},unbind:function(){X(this,"unbind");U(this,
"unbind");this.__controllerContext.isRoot||e(6031);this.rootController||e(6037);try{$a(this)}catch(a){ia(this,a)}},dispose:function(){X(this,"dispose");this.__controllerContext.isRoot||e(6031);return ia(this)},triggerIndicator:function(b){X(this,"triggerIndicator");U(this,"triggerIndicator");var c={indicator:null};b&&a.extend(c,b);a(this.rootElement).trigger(tb,[c]);return c.indicator},indicator:function(a){X(this,"indicator");U(this,"indicator");return aa(this,a)},enableListeners:function(){X(this,
"enableListeners");F(this,!0)},disableListeners:function(){X(this,"disableListeners");F(this,!1)},throwError:function(a,b){X(this,"throwError");var c=Ia(arguments);c.unshift(null);this.throwCustomError.apply(this,c)},throwCustomError:function(a,b,c){X(this,"throwCustomError");2>arguments.length&&e(6005);var d=null;b&&x(b)?d=Error(Hb.apply(null,Ia(arguments).slice(1))):(d=Error(),d.detail=b);d.customType=a;throw d;},on:function(a,c,d){X(this,"on");U(this,"on");a=Xa(a,c,this);d=b(this,a,d);a=0;for(c=
d.length;a<c;a++)h(d[a],N(this.rootElement))},off:function(a,b,c){X(this,"off");U(this,"off");for(var d=Xa(a,b,this),a=this.__controllerContext.boundHandlers,k=null,e=d.bindTarget,b=d.eventName,h=d.selector,m=d.isGlobal,d=d.isBindRequested,f=0,o=a.length;f<o;f++){var g=a[f];if(e){if(hb(e,g.bindTarget)&&b===g.eventName&&g.originalHandler===c){k=g;break}}else if(h===g.selector&&m===g.isGlobal&&d===g.isBindRequested&&c===g.originalHandler){k=g;break}}k&&n(k,N(this.rootElement))},manageChild:function(a){X(this,
"manageChild");U(this,"manageChild");a&&a.__controllerContext&&(a.parentController=this,a.rootController=this.rootController,this.__controllerContext.childControllers.push(a))},unmanageChild:function(a,b){X(this,"unmanageChild");U(this,"unmanageChild");for(var c=!1===b?!1:!0,d=this.__controllerContext.childControllers,k=-1,e=0,h=d.length;e<h;e++)if(d[e]===a){k=e;break}-1!==k&&(d.splice(k,1),a.parentController=null,a.rootController=a,a.__controllerContext.isRoot=!0,c&&a.dispose())}});d.mixin.eventDispatcher.mix(ca.prototype);
a.extend(ca.prototype,{getAllControllers:function(){return this.controllers},getControllers:function(b,c){for(var d=c&&c.deep,k=c&&c.name?O(c.name):null,e=a(b)[0],h=this.controllers,m=[],f=0,o=h.length;f<o;f++){var g=h[f];!(k&&-1===a.inArray(g.__name,k))&&g.rootElement&&(e===g.rootElement?m.push(g):d&&N(e)===N(g.rootElement)&&a.contains(e,g.rootElement)&&m.push(g))}return m}});a.extend(ub.prototype,{get:function(a){return this._cacheMap[a]},register:function(a,b){this._cacheMap[a]=b},clear:function(a){delete this._cacheMap[a]},
clearAll:function(){this._cacheMap={}},_init:function(){this._cacheMap={}}});za=new ub;Pa=new ca;d.u.obj.expose("h5.core",{controllerManager:Pa,definitionCacheManager:{clear:function(a){za.clear(a)},clearAll:function(){za.clearAll()}}});var Ea=function(){var a={},b=new wa(null,"a"),c;for(c in b)b.hasOwnProperty(c)&&"__name"!==c&&"__templates"!==c&&"__meta"!==c&&(a[c]=1);b=wa.prototype;for(c in b)b.hasOwnProperty(c)&&(a[c]=null);return a}();fa.controllerInternal=db;fa.controllerConstructor=wa;fa.isDisposing=
ja;d.u.obj.expose("h5.core",{controller:function(a,b,c){2>arguments.length&&e(6032);return db(a,b,c)},logic:Y,expose:function(a){var b=a.__name;b||e(6019,null,{target:a});var c=b.lastIndexOf(".");if(-1===c)window[b]=a;else{var k=b.substr(0,c),b=b.substr(c+1,b.length),c={};c[b]=a;d.u.obj.expose(k,c)}},childFrom:function(a){return new f(a)}})})();(function(){function l(a){return a instanceof Date}function B(a){return function(c){for(var b=a.queries,d=0,e=b.length;d<e;d++){var f=b[d],i=f.compareFunction;
if(!i(c[f.prop],f.queryValue))return!1}b=a.userFunctions;d=0;for(e=b.length;d<e;d++)if(!b[d](c))return!1;b=a.nestedCriterias;d=0;for(e=b.length;d<e;d++)if(!b[d].match(c))return!1;return!0}}function u(a){return function(c){for(var b=a.queries,d=0,e=b.length;d<e;d++){var f=b[d],i=f.compareFunction;if(i(c[f.prop],f.queryValue))return!0}b=a.userFunctions;d=0;for(e=b;d<e;d++)if(!b[d](c))return!0;b=a.nestedCriterias;d=0;for(e=b.length;d<e;d++)if(b[d].match(c))return!0;return!1}}function v(d){var c=d._criteria.match,
b=d.result;return function(e){for(var f=e.removed,i=e.created,e=e.changed,j=!0,g=0,l=f.length;g<l;g++){var t=a.inArray(f[g],b._src);-1!==t&&b.splice(t,1)}g=0;for(l=e.length;g<l;g++)t=a.inArray(e[g].target,b._src),j=!1,c(e[g].target.get())?-1===t&&b.push(e[g].target):-1!==t&&b.splice(t,1);g=0;for(l=i.length;g<l;g++)c(i[g].get())&&(j=!1,b.push(i[g]));d._compareFunction&&!j&&b.sort(d._compareFunction)}}function A(d){var c=[],b=[],h=[],f={queries:c,nestedCriterias:b,userFunctions:h},j;for(j in d)if(j!==
s)if(a.isPlainObject(d[j]))b.push(A(d[j]));else if(K(d[j]))h.push(d[j]);else{var t=d[j],g=H(t)?t[0]:t,v=null,v=g instanceof RegExp?i:l(g)?p:w,z=a.trim(j.replace(/ +/g," ")).split(" "),x=z[1]||"=";(compareFunction=v[x])||e(E,[x,a.type(g)]);c.push({prop:z[0],queryValue:t,compareFunction:compareFunction})}f.match="or"===d[s]?u(f):B(f);return f}function f(a){return function(c,b){var d=c.get(a),e=b.get(a);return d>e?1:d<e?-1:0}}function j(a){return function(c,b){var d=c.get(a),e=b.get(a);return d>e?-1:
d<e?1:0}}function t(a){this.result=d.core.data.createObservableArray();this._model=a;this._isLive=!1}var s="__op",w={"=":function(a,c){return a===c},"!=":function(a,c){return a!==c},"<":function(a,c){return a<c},">":function(a,c){return a>c},"<=":function(a,c){return a<=c},">=":function(a,c){return a>=c},between:function(a,c){var b=c[1];return c[0]<=a&&a<=b},"!between":function(a,c){var b=c[1];return a<c[0]||b<a},"in":function(d,c){return-1!==a.inArray(d,c)},"!in":function(d,c){return-1===a.inArray(d,
c)}},i={"=":function(a,c){return c.test(a)},"!=":function(a,c){return!c.test(a)}},p={"=":function(a,c){return!l(a)?!1:a.getTime()===c.getTime()},"!=":function(a,c){return!l(a)?!0:a.getTime()!==c.getTime()},"<":function(a,c){return!l(a)?!1:a.getTime()<c.getTime()},">":function(a,c){return!l(a)?!1:a.getTime()>c.getTime()},"<=":function(a,c){return!l(a)?!1:a.getTime()<=c.getTime()},">=":function(a,c){return!l(a)?!1:a.getTime()>=c.getTime()},between:function(a,c){if(!l(a))return!1;var b=c[0].getTime(),
d=c[1].getTime(),e=a.getTime();return b<=e&&e<=d},"!between":function(a,c){if(!l(a))return!1;var b=c[0].getTime(),d=c[1].getTime(),e=a.getTime();return e<b||d<e},"in":function(a,c){if(!l(a))return!1;for(var b=a.getTime(),d=0,e=c.length;d<e;d++)if(b===c[d].getTime())return!0;return!1},"!in":function(a,c){if(!l(a))return!0;for(var b=a.getTime(),d=0,e=c.length;d<e;d++)if(b===c[d].getTime())return!1;return!0}},E=1,z={};z[E]='演算子"{0}"で"{1}"型の値を比較することはできません';z[2]="ORDER BY句の指定が不正です。指定されたキー({0})は存在しません";
z[3]='ORDER BY句の指定が不正です。指定されたorder句:{0} "key名 ASC"または"key名 DESC"またはソート関数を指定してください';wb(z);a.extend(t.prototype,{setCriteria:function(a){this._criteria=A(a);this._isLive&&this.execute();return this},execute:function(){this._executeDfd=d.async.deferred();var a=this.result;a.copyFrom(null);for(var c in this._model.items){var b=this._model.items[c];this._criteria.match(b.get())&&a.push(b)}this._compareFunction&&a.sort(this._compareFunction);this._executeDfd.resolveWith(this,[a]);return this},onQueryComplete:function(a){this._executeDfd.done(a);
return this},setLive:function(){if(!this._isLive)return this._listener=this._listener||v(this),this._model.addEventListener("itemsChange",this._listener),this._isLive=!0,this},unsetLive:function(){if(this._isLive)return this._model.removeEventListener("itemsChange",this._listener),this._isLive=!1,this},orderBy:function(d){if(K(d))return this._compareFunction=d,this.result.sort(this._compareFunction),this;(!d||!x(d))&&e(3,[d]);var c=d.split(" "),b=a.trim(c[0]);this._model.schema.hasOwnProperty(b)||
e(2,[this._model.name,b]);c=c[1]?a.trim(c[1].toUpperCase()):"ASC";"DESC"===c?this._compareFunction=j(b):"ASC"===c?this._compareFunction=f(b):e(3,[d]);this._isLive&&this.result.sort(this._compareFunction);return this}});Ta={createQuery:function(){return new t(this)}}})();(function(){function l(a){return(a=a&&x(a)?a.match(/^(string|number|integer|boolean|any|enum|@(.+?))((\[\]){0,1})$/):null)?{elmType:a[1],dataModel:a[2],dimension:a[3]?1:0}:{}}function B(b,c){return function Ba(b,d){if(!c[b])return!1;
for(var k=0,e=c[b].length;k<e;k++)if(-1<a.inArray(c[b][k],d)||Ba(c[b][k],d.concat([b])))return!0;return!1}(b,[])}function u(a){return"number"===typeof a&&isNaN(a)}function v(a,b){return null==a||u(a)||"number"===typeof a||!b&&(a instanceof Number||!(!(x(a)||a instanceof String)||!a.match(/^[+\-]{0,1}[0-9]*\.{0,1}[0-9]+$/)))}function A(a,b){return null==a||"number"===typeof a&&parseInt(a)===a||!b&&(a instanceof Number&&parseInt(a)===parseFloat(a)||("string"===typeof a||a instanceof String)&&!!a.match(/^[+\-]{0,1}[0-9]+$/))}
function f(b,c,d){function m(){h.push(q.call(this,arguments));if(d)throw null;}var h=[];try{if(!a.isPlainObject(b))throw m(ba),null;pa(b.name)||m(ja);var f=b.base,g=null;if(null!=f)if(!x(f)||0!==f.indexOf("@"))m(ka);else{var i=f.substring(1);c.models[i]?g=c.models[i].schema:m(ab,i)}var j=b.schema;!g&&null==j&&m(bb);if(!g&&!a.isPlainObject(j))throw m(o),null;}catch(n){e(P,null,h)}}function j(b,c,d,h){function f(){o.push(q.call(this,arguments));if(h)throw null;}"object"!==typeof b&&e(S);var o=[];try{if(c){var g=
!1,i;for(i in b)b[i]&&!0===b[i].id&&(g&&f(I),g=!0);g||f(oa)}var j={},g=function(a){if(null!=a){p&&f(m,C);t.hasOwnProperty("defaultValue")&&f(Ha,C);if(null==a.on)f(r,C);else for(var c=O(a.on),d=0,e=c.length;d<e;d++)if(!b.hasOwnProperty(c[d])){f(r,C);break}"function"!==typeof a.calc&&f(Q,C);j[C]=O(a.on)}};i=function(a){p&&null==a&&(a="string");var b={};null!=a&&(x(a)?(p&&"string"!==a&&"integer"!==a&&f(Na,C),b=l(a),b.elmType?(b.dataModel&&(c||f(cb,C,b.dataModel),d.models[b.dataModel]||f(hb,C,b.dataModel)),
"enum"===b.elmType&&null==t.enumValue&&f(U,C)):f(cb,C,a)):f(D,C))};var n=function(b,c){if(null!=b)if(a.isPlainObject(b)){for(var d in b){var k=b[d];if(null!=k)switch(d){case "notNull":!0!==k&&!1!==k?f(Oa,C,d):p&&!k&&f(ga,C,d,k);break;case "min":case "max":switch(c.elmType){case "integer":(x(k)||!A(k)||u(k))&&f(Ya,C,d);break;case "number":(x(k)||x(k)||!v(k)||Infinity===k||-Infinity===k||u(k))&&f(Ya,C,d);break;default:f(wa,C,d,c.elmType)}break;case "minLength":case "maxLength":switch(c.elmType){case "string":x(k)||
!A(k)||u(k)||0>k?f(ca,C,d):p&&"maxLength"===d&&0===k&&f(ga,C,d,k);break;default:f(wa,C,d,c.elmType)}break;case "notEmpty":switch(c.elmType){case "string":!0!==k&&!1!==k?f(Oa,C,d):p&&!k&&f(ga,C,d,k);break;default:f(wa,C,d,c.elmType)}break;case "pattern":switch(c.elmType){case "string":"regexp"!==a.type(k)&&f(Z,C,d);break;default:f(wa,C,d,c.elmType)}}}b.notEmpty&&0===b.maxLength&&f(R,C,"notEmpty","maxLength");null!=b.min&&null!=b.max&&b.min>b.max&&f(R,C,"min","max");null!=b.minLength&&null!=b.maxLength&&
b.minLength>b.maxLength&&f(R,C,"minLength","maxLength")}else f(X,C)},y=function(b,c){null!=b&&("enum"!==c.elmType&&f(Y,C),(!H(b)||0===b.length||-1<a.inArray(null,b)||-1<a.inArray(void 0,b))&&f($,C))},C;for(C in b){var t=null==b[C]?{}:b[C],p=c&&!!t.id;pa(C)||f(Xa,C);g(t.depend);i(t.type);var s={},w=p&&null==w?"string":t.type;x(w)&&(s=l(w));n(t.constraint,s);y(t.enumValue,s);p&&t.hasOwnProperty("defaultValue")&&f(fa,C)}for(var F in j)B(F,j)&&f(Da,F)}catch(ia){e(aa,null,o)}return!0}function t(a,b){var c=
[];try{for(var d in a){var f=a[d];if(f&&(f.hasOwnProperty("defaultValue")||!f.type||!("array"===f.type||l(f.type).dimension))&&f.hasOwnProperty("defaultValue")){var m=f.defaultValue;b[d](m).length&&pushErrorReason(V,d,m)}}return!0}catch(h){e(aa,null,c)}}function s(a,b,c){var d={},e;for(e in a){var f=d,m=e,h;h=c;var o=a[e]||{},g=[],j=null,n=0,j=o.type,r=o.constraint||{};b&&o.id&&(j=j||"string",r.notNull=!0,"string"===j&&(r.notEmpty=!0));j&&(n=l(j),j=n.elmType,n=n.dimension,g.push(i(j,{manager:h,enumValue:o.enumValue})));
r&&g.push(w(r));h=p({checkFuncs:g,dimension:n});f[m]=h}return d}function w(a){return function(b){var c=[];a.notNull&&null==b&&c.push({notNull:a.notNull});a.notEmpty&&!b&&c.push({notEmpty:a.notEmpty});if(null==b)return c;null!=a.min&&b<a.min&&c.push({min:a.min});null!=a.max&&a.max<b&&c.push({max:a.max});null!=a.minLength&&b.length<a.minLength&&c.push({minLength:a.minLength});null!=a.maxLength&&a.maxLength<b.length&&c.push({maxLength:a.maxLength});null!=a.pattern&&!b.match(a.pattern)&&c.push({pattern:a.pattern});
return c}}function i(b,c){var d=[{type:b}];switch(b){case "number":return function(a,b){return v(a,b)?[]:d};case "integer":return function(a,b){return A(a,b)?[]:d};case "string":return function(a,b){return null==a||x(a)||!b&&a instanceof String?[]:d};case "boolean":return function(a,b){return null==a||"boolean"===typeof a||!b&&a instanceof Boolean?[]:d};case "enum":return function(b){var k;a:if(k=c.enumValue,u(b)){for(var b=0,e=k.length;b<e;b++)if(u(k[b])){k=!0;break a}k=!1}else k=null===b||-1<a.inArray(b,
k);return k?[]:d};case "any":return function(){return[]}}var e=b.match(/^@(.+?)$/)[1],f=c.manager;return function(a){var b=f.models[e];return!b||"object"!==typeof a&&null!=a?d:null==a||b.has(a)?[]:d}}function p(a){var b=a.checkFuncs;if(!b||0===b.length)return function(){return[]};var c=a.dimension||0;return function(a,k){function e(a,m){if(!m){for(var h=0,o=b.length;h<o;h++){var g=b[h](a,k);if(g.length)return f=f.concat(g),!1}return!0}if(null==a)return!0;if(!H(a)&&!d.core.data.isObservableArray(a))return f.push({dimension:c}),
!1;h=0;for(o=a.length;h<o;h++)if(!e(a[h],m-1))return!1;return!0}var f=[];e(a,c);return f}}function E(a,b){a._values={};a._nullProps={};for(var c in b)if(b[c]&&z(b[c].type)){var d=xa();d.relatedItem=a;a._values[c]=d;a._nullProps[c]=!0}}function z(a){return!a?!1:-1!==a.indexOf("[]")}function q(){return{code:arguments[0]}}function c(b,c,d,f){function m(c){for(var c=O(g[c].depend.on),d=0,e=c.length;d<e;d++)if(-1===a.inArray(c[d],b._realProperty)&&-1!==a.inArray(c[d],o))return!1;return!0}function h(b,
c){for(var d=0,e=c.length;d<e;d++){var k=i[c[d]];if(k)for(var f=0,m=k.length;f<m;f++){var o=k[f];-1===a.inArray(o,b)&&b.push(o)}}}var o=[],g=b.schema||b._model.schema,i=b._dependencyMap,j={};for(f?o=b._dependProps.slice():h(o,O(d));0!==o.length;){for(var d=[],f=0,n=o.length;f<n;f++){var r=o[f];if(m(r)){var y=g[r].depend.calc.call(b,c);0!==b._validateItemValue(r,y,!0).length&&e(ua,[b._model?b._model.name:Ga,r,y]);j[r]={oldValue:b._values[r],newValue:y};g[r]&&z(g[r].type)?y?(b._values[r].copyFrom(y),
b._nullProps[r]=!1):(b._values[r].copyFrom([]),b._nullProps[r]=!0):b._values[r]=y}else d.push(r)}h(d,o);o=d}return j}function b(a,b,c,d){for(var f in c){f in a||e($a,[d?d.name:Ga,f]);var m=c[f];if(!a[f]||!z(a[f].type)||c.hasOwnProperty(f))m=b(f,m,d&&d._idKey===f),0<m.length&&e(C,[d?d.name:Ga,f],m)}}function h(b,f,m,h){var o=b.schema||b._model.schema,g=[],i;for(i in f)if(!(m&&-1!==a.inArray(i,m))){var j=b._values[i],r=f[i];if(o[i]&&o[i].depend)j!==r&&e(ia,[b._model?b._model.name:Ga,i]);else{var n=
o[i]&&o[i].type;z(n)&&(null==r?(r=[],b._nullProps[i]=!0):b._nullProps[i]=!1);if(n&&n.match(/string|number|integer|boolean/)){var y=r;if(H(y)){for(var y=y.slice(0),r=0,D=y.length;r<D;r++)y[r]=y[r]&&"object"===typeof y[r]?y[r]&&y[r].valueOf&&y[r].valueOf():y[r];r=y}else r=y&&"object"===typeof y&&y.valueOf?y.valueOf():y}if(null!=r&&n&&n.match(/number|integer/)&&"number"!==typeof r)if(H(r)||d.core.data.isObservableArray(r)){y=0;for(D=r.length;y<D;y++)null!=r[y]&&v(r[y])&&(r[y]=parseFloat(r[y]))}else null!=
r&&(r=parseFloat(r));if(!z(n)||!j||!j.equals(r))j===r||u(j)&&u(r)||(n&&-1!==n.indexOf("[]")&&d.core.data.isObservableArray(j)&&(j=j.toArray()),g.push({p:i,o:j,n:r}))}}if(g.length){f={};m=[];y=0;for(i=g.length;y<i;y++)j=g[y],o[j.p]&&z(o[j.p].type)?j.n&&b._values[j.p].copyFrom(j.n):b._values[j.p]=j.n,f[j.p]={oldValue:j.o,newValue:b.get(j.p)},m.push(j.p);o={type:!0===h?"create":"change",target:b,props:f};a.extend(f,c(b,o,m,h));return o}}function n(a){var b=a._manager,a=a.name;b._updateLogs||(b._updateLogs=
{});b._updateLogs[a]||(b._updateLogs[a]={});return b._updateLogs[a]}function F(a,b,c){if(a._manager)for(var d=n(a),e=0,f=c.length;e<f;e++){var m=c[e],h=m._values[a._idKey];d[h]||(d[h]=[]);d[h].push({type:b,item:m})}}function J(a,b){if(a._manager){var c=n(a),d=b.target._values[a._idKey];c[d]||(c[d]=[]);c[d].push({type:va,ev:b})}}function g(b){var c={},d;for(d in b)if(b.hasOwnProperty(d)){var e=b[d]?b[d].depend:null;if(e)for(var e=O(e.on),f=0,m=e.length;f<m;f++){var h=e[f];c[h]||(c[h]=[]);-1===a.inArray(d,
c[h])&&c[h].push(d)}}return c}function na(b,c){f(b,c,!0);var d;d=(d=b.base)?c.models[d.slice(1)].schema:{};d=a.extend({},d,b.schema);j(d,!0,c,!0);var e=s(d,!0,c);t(d,e,!0);return new Fa(d,b,e,c)}function da(b,c){var d=[],e=[],f=[],m;for(m in b)b[m]&&b[m].depend?e.push(m):d.push(m),b[m]&&b[m].type&&-1!==b[m].type.indexOf("[]")&&f.push(m);m=g(b);var h={},o;for(o in b){var r=b[o];if(!r||!r.depend){var i=null,i=r&&void 0!==r.defaultValue?r.defaultValue:null;h[o]=i}}return{_realProps:d,_dependProps:e,
_aryProps:f,_dependencyMap:m,_createInitialValueObj:function(b){if(!b)return a.extend({},h);var c=a.extend({},h),d;for(d in b)c[d]=b[d];return c},_validateItemValue:function(a,b,d){return c[a](b,d)}}}function L(b,c,f,m){var h=!1,o=["sort","reverse","pop","shift"],g=null;f.addEventListener("changeBefore",function(f){m&&(b._isRemoved||!m._manager)&&e(y,[b._values[m._idKey],f.method]);var r=d.u.obj.argsToArray(f.args);if(-1===a.inArray(f.method,o)){var i=!0;switch(f.method){case "splice":i=!1;r.shift();
r.shift();break;case "copyFrom":r=r[0];break;case "set":r.shift()}i&&(f=b._validateItemValue(c,r),0<f.length&&e(C,c,f))}m?(m._manager&&(f=m._manager,r=m.name,f._oldValueLogs||(f._oldValueLogs={}),f._oldValueLogs[r]||(f._oldValueLogs[r]={}),f=f._oldValueLogs[r],r=b._values[m._idKey],f[r]||(f[r]={}),f[r][c]||(f[r][c]=b._values[c].toArray())),(h=m._manager?m._manager.isInUpdate():!1)||m._manager.beginUpdate()):g=b._values[c].toArray()});f.addEventListener("change",function(a){if(!(b._isInSet||null===
a.method)){var d={type:"change",target:b,props:{}};d.props[c]={};m?(J(m,d),h?a.stopImmediatePropagation():(m._manager._isArrayPropChangeSilentlyRequested=!0,m._manager.endUpdate(),m._manager._isArrayPropChangeSilentlyRequested=!1)):f.equals(g)||(d.props[c]={oldValue:g,newValue:b._values[c]},b.dispatchEvent(d))}})}function ma(a){pa(a)||e(ha);this.models={};this.name=a;this._updateLogs=null;this._isArrayPropChangeSilentlyRequested=!1}function Fa(a,b,c,d){this.items={};this.size=0;this.name=b.name;this._manager=
d;for(var e in a)a[e]&&a[e].id&&(this._idKey=e);this._idType=(b=a[this._idKey].type)?"string"===b?W:fb:W;this.schema=a;this._itemConstructor=ea(a,c,this);d.models[this.name]=this}function ea(c,e,f){function m(a){E(this,c,o,a);a=o._createInitialValueObj(a);b(c,o._validateItemValue,a,f);h(this,a,null,!0);for(var a=o._aryProps,d=0,e=a.length;d<e;d++)L(this,a[d],this.get(a[d]),f)}var o=da(c,e);f._schemaInfo=o;d.mixin.eventDispatcher.mix(m.prototype);a.extend(m.prototype,o,qa,{_model:f,_isRemoved:!1,getModel:function(){return this._isRemoved?
null:this._model}});return m}function N(){}function T(){this.length=0;this._src=[]}function xa(){return new T}function M(a){return a&&a.constructor===T?!0:!1}var W="string",fb="number",ha=15E3,P=15001,y=15005,S=15008,aa=15009,C=15011,ia=15012,$a=15013,ua=15016,ba=15900,ja=15901,ka=15902,ab=15903,bb=15904,o=6,I=15800,oa=15801,Xa=15802,m=15803,r=15804,Q=15805,D=15806,cb=15807,hb=15808,U=15809,X=15810,Oa=15811,Ya=15812,wa=15813,Z=15814,ca=15815,R=15816,Y=15817,$=15818,fa=15819,V=15820,ga=15821,Ha=15822,
Da=15823,Na=15824,Ga="n/a",va=2,qa={get:function(b){if(0===arguments.length)return a.extend({},this._values);var c=this._model;if(!(c?c.schema:this.schema).hasOwnProperty(b))e(15014,[c?c.name:Ga,b]);return this._values[b]},set:function(a){var c=a;2===arguments.length&&(c={},c[arguments[0]]=arguments[1]);var d=this._model;d&&(this._isRemoved||!d._manager)&&e(y,[this._values[this._model._idKey],"set"],this);if(d)d._idKey in c&&c[d._idKey]!==this._values[d._idKey]&&e(15003,[d.name,this._idKey]),b(d.schema,
d._schemaInfo._validateItemValue,c,d);else{var f=this.validate(c);if(f)throw f;}var f=null,m=d?d._manager.isInUpdate():!1;d&&!m&&d._manager.beginUpdate();this._isInSet=!0;f=h(this,c);this._isInSet=!1;d?(f&&J(d,f),m||d._manager.endUpdate()):f&&this.dispatchEvent(f)},regardAsNull:function(a){return this._isArrayProp(a)?!0===this._nullProps[a]:null===this._values[a]},_isArrayProp:function(a){var b=this._model?this._model.schema:this.schema;return b[a]&&b[a].type&&-1<b[a].type.indexOf("[]")?!0:!1}};d.mixin.eventDispatcher.mix(ma.prototype);
a.extend(ma.prototype,{createModel:function(b){(!b||"object"!==typeof b)&&e(P,null,[q(ba)]);if(!H(b))return this.models[b.name]?this.models[b.name]:na(b,this);var c=b.length;c||e(P,null,[q(ba)]);for(var d={},f=[],m=0;m<c;m++){var h=b[m].name;if(this.models[h])j[m]=manager.models[b.name];else try{f.push(h);h=[];b[m].base&&h.push(b[m].base.substring(1));for(var o in b[m].schema){var g=b[m].schema[o];if(g){var r=g.type;r&&"@"===r.substring(0,1)&&(r=-1===r.indexOf("[]")?r.substring(1):r.substring(1,r.length-
2),h.push(r))}}d[m]={depends:h}}catch(i){e(P)}}for(var j={size:0};j.size<c;){o={};g=!1;for(m=0;m<c;m++)if(!d[m].registed){for(var h=d[m].depends,r=0,n=h.length;r<n;r++)if(!this.models[h[r]]){o[h[r]]=!0;break}r===n&&(j[m]=na(b[m],this),j.size++,g=!0,d[m].registed=!0)}if(!g){var m=!0,y;for(y in o)if(-1===a.inArray(y,f)){m=!1;break}m&&e(15004);e(P,null,[q(ab,y)])}}b=[];for(m=0;m<c;m++)b.push(j[m]);return b},dropModel:function(a){if((a=x(a)?a:"object"===typeof a?a.name:null)&&this.models[a]){var b=this.models[a];
b._manager=null;delete this.models[a];return b}},isInUpdate:function(){return null!==this._updateLogs},beginUpdate:function(){this.isInUpdate()||(this._updateLogs={})},endUpdate:function(){if(this.isInUpdate()){var a=!this._isArrayPropChangeSilentlyRequested,b=this._updateLogs,c=this._oldValueLogs;this._oldValueLogs=this._updateLogs=null;var d={},e;for(e in b)if(b.hasOwnProperty(e)){var f;f=this.models[e];var m=b[e],h=[],o=[],g=[],r=[],i=void 0;for(i in m){for(var j=m[i],n=!0,y=[],D=j.length-1;0<=
D;D--){var Q=j[D],C=Q.type;if(C===va)y.push(Q.ev);else{a:{for(n=0;n<D;n++){var l=j[n].type;if(1===l||3===l){D=j[n];break a}}D=null}if(1===C)D&&3===D.type?h.push({id:i,oldItem:D.item,newItem:Q.item}):o.push(Q.item);else if(D=D&&3===D.type?D.item:D?null:Q.item)r.push(D),D.dispatchEvent({type:"remove",model:f});n=!1;break}}if(n&&0<y.length){Q={};for(D=y.length-1;0<=D;D--)for(var I in y[D].props)Q[I]||(M(f.get(i).get(I))?(C=c&&c[f.name]&&c[f.name][i]&&c[f.name][i][I],f.get(i).get(I).equals(C)||(Q[I]=
{oldValue:C})):Q[I]={oldValue:y[D].props[I].oldValue});D=!1;for(I in Q)C=Q[I].oldValue,j=f.get(i).get(I),C===j||u(C)&&u(j)?delete Q[I]:(D=f.get(i).get(I),a&&M(D)&&D.dispatchEvent({type:"change",method:null,args:null,returnValue:null}),Q[I].newValue=D,D=!0);D&&(y={type:"change",target:y[0].target,props:Q},g.push(y),y.target.dispatchEvent(y))}}(f=0===o.length&&0===h.length&&0===r.length&&0===g.length?!1:{created:o,recreated:h,removed:r,changed:g})&&(d[e]=f)}a=!1;for(e in d)a=!0,f=d[e],this.models[e].dispatchEvent({type:"itemsChange",
created:f.created,recreated:f.recreated,removed:f.removed,changed:f.changed});d={type:"itemsChange",models:d};a&&this.dispatchEvent(d)}},_dataModelItemsChangeListener:function(a){var b=a.target.manager,c={};c[a.target.name]=a;b.dispatchEvent({type:"itemsChange",models:c})}});d.mixin.eventDispatcher.mix(Fa.prototype);a.extend(Fa.prototype,{create:function(a){this._manager||e(15006,[this.name,"create"]);var b=this.validate(a,!0);if(b)throw b;(b=this._manager?this._manager.isInUpdate():!1)||this._manager.beginUpdate();
for(var c=[],d=O(a),f=[],m=this._idKey,o=0,g=d.length;o<g;o++){var r=d[o],i=r[m],j=this._findById(i);j?(f.push(j),(i=h(j,r,[m]))&&J(this,i)):(r=new this._itemConstructor(r),this.items[i]=r,this.size++,c.push(r),f.push(r))}0<c.length&&F(this,1,c);b||this._manager.endUpdate();return H(a)?f:f[0]},validate:function(a,c){try{var d=this._idKey,f=O(a);"object"!==typeof a&&!H(a)&&e(15007);if(c)for(var m=0,h=f.length;m<h;m++){var o=f[m],g=o[d];(""===g||null==g)&&e(15002,[this.name,d]);var r=this._schemaInfo._createInitialValueObj(o);
b(this.schema,this._schemaInfo._validateItemValue,r,this)}else for(var m=0,i=f.length;m<i;m++)o=f[m],b(this.schema,this._schemaInfo._validateItemValue,o,this)}catch(j){return j}return null},get:function(a){if(H(a)||d.core.data.isObservableArray(a)){for(var b=[],c=0,e=a.length;c<e;c++)b.push(this._findById(a[c]));return b}return this._findById(a)},remove:function(a){this._manager||e(15006,[this.name,"remove"]);var b=this._manager?this._manager.isInUpdate():!1;b||this._manager.beginUpdate();for(var c=
this._idKey,d=O(a),f=[],m=[],h=0,o=d.length;h<o;h++)if(this.has(d[h])){var g=x(d[h])||A(d[h],!0)?d[h]:d[h]._values[c],r=this.items[g];delete this.items[g];this.size--;m.push(r);r._model&&(r._isRemoved=!0);f.push(r)}else m.push(null);0<f.length&&F(this,3,f);b||this._manager.endUpdate();return H(a)?m:m[0]},removeAll:function(){var a=this.toArray();0<a.length&&this.remove(a);return a},has:function(a){return x(a)||A(a,!0)?!!this._findById(a):"object"===typeof a?null!=a&&K(a.get)&&a===this.items[a.get(this._idKey)]:
!1},getManager:function(){return this._manager},_findById:function(a){a=this.items[a];return typeof a===la?null:a},_dispatchItemsChangeEvent:function(a){a={type:"itemsChange",created:[],recreated:[],removed:[],changed:[a]};this.dispatchEvent(a);this._manager&&(a.target=this,this._manager._dataModelItemsChangeListener(a))},toArray:function(){var a=[],b=this.items,c;for(c in b)b.hasOwnProperty(c)&&a.push(b[c]);return a},createQuery:Ta.createQuery});d.mixin.eventDispatcher.mix(N.prototype);a.extend(N.prototype,
qa,{validate:function(a){try{var c=a;2===arguments.length&&(c={},c[arguments[0]]=arguments[1]);b(this.schema,this._validateItemValue,c)}catch(d){return d}return null}});d.mixin.eventDispatcher.mix(T.prototype);var Sa={equals:function(a){var b=M(a);if(!b&&!H(a))return!1;a=b?a._src:a;b=this.length;if(a.length!==b)return!1;for(var c=0;c<b;c++){var d=this[c],e=a[c];if(!(d===e||u(d)&&u(e)))return!1}return!0},copyFrom:function(a){null==a&&(a=[]);a=M(a)?a._src:a;H(a)||e(15010,[0,a]);a=a.slice(0);a.unshift(0,
this.length);Array.prototype.splice.apply(this,a)},get:function(a){return this[a]},set:function(a,b){this[a]=b},toArray:function(){return this.slice(0)},concat:function(){for(var a=d.u.obj.argsToArray(arguments),b=0,c=a.length;b<c;b++)M(a[b])&&(a[b]=a[b].toArray());return this.concat.apply(this,a)}},Qa="concat,join,pop,push,reverse,shift,slice,sort,splice,unshift,indexOf,lastIndexOf,every,filter,forEach,map,some,reduce,reduceRight".split(","),sa;for(sa in Sa)Sa.hasOwnProperty(sa)&&-1===a.inArray(sa,
Qa)&&Qa.push(sa);var Ka=["concat","slice","splice","filter","map"],Ua=["reverse","sort"],La="sort,reverse,pop,shift,unshift,push,splice,copyFrom,set".split(",");sa=0;for(var Ma=Qa.length;sa<Ma;sa++){var Ea=Qa[sa];T.prototype[Ea]=function(b){function c(){var e=d.apply(this._src,arguments);if(-1!==a.inArray(b,Ua))e=this;else if(-1!==a.inArray(b,Ka)){var f=xa();f.copyFrom(e);e=f}return e}var d=Sa[b]?Sa[b]:Array.prototype[b];return-1===a.inArray(b,La)?c:function(){if(!this.dispatchEvent({type:"changeBefore",
method:b,args:arguments})){var a=c.apply(this,arguments);this.length=this._src.length;this.dispatchEvent({type:"change",method:b,args:arguments,returnValue:a});return a}}}(Ea)}d.u.obj.expose("h5.core.data",{createManager:function(a,b){pa(a)||e(ha);var c=new ma(a);if(null!=b){""===b&&(b="window");var f={};f[a]=c;d.u.obj.expose(b,f)}return c},createObservableArray:xa,createObservableItem:function(a){j(a,!1,null,!0);var c=s(a);t(a,c,!0);var d=new N,c=da(a,c);E(d,a,c);d.schema=a;for(var e in c)d[e]=c[e];
e=c._createInitialValueObj();b(a,c._validateItemValue,e);h(d,e,null,!0);a=0;for(c=d._aryProps.length;a<c;a++)L(d,d._aryProps[a],d.get(d._aryProps[a]));return d},isObservableArray:M,isObservableItem:function(a){return!(!a||!a.constructor||!a._validateItemValue||K(a.getModel))},createSequence:function(b,c,d){function e(){return g}function f(){var a=g;g+=r;return a}function m(){return g.toString()}function h(){var a=g;g+=r;return a.toString()}function o(){}var g=null!=b?b:1,r=null!=c?c:1,b=1===d?{current:m,
next:h,returnType:1}:{current:e,next:f,returnType:2};b.setCurrent=function(a){g=a};a.extend(o.prototype,b);return new o},SEQ_STRING:1,SEQ_INT:2})})();(function(){function l(a,b){return!a||a.nodeType!==$?void 0:a.getAttribute(b)}function B(a){if(!a)return null;for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b}function u(a,b,c,d){var e=[],b=O(b);if(!0===d)return v(e,a,b,c),e;for(var a=a.childNodes,d=0,f=a.length;d<f;d++)v(e,a[d],b,c);return e}function v(a,b,c,d){if(b.nodeType===$){for(var e=
0,f=c.length;e<f;e++){var h=b.getAttribute(c[e]);if(typeof d===la){if(null!==h){a.push(b);break}}else if(null!==h&&h==d){a.push(b);break}}if(0<b.childNodes.length){b=b.childNodes;e=0;for(f=b.length;e<f;e++)v(a,b[e],c,d)}}}function A(b,c){for(var b=O(b),d=[],e=0,f=b.length;e<f;e++){var g=b[e];if(g.nodeType===$&&!(!0===c&&(null!=l(g,n)||null!=l(g,F))))for(var i=u(g,h,void 0,!0),j=0,q=i.length;j<q;j++){for(var t=!0,p=i[j];null!=p&&p!==g;p=p.parentNode)if(null!=l(p,n)||null!=l(p,F)){t=!1;break}t&&d.push(i[j])}}return a(d)}
function f(b,c,d){for(var e=[],f=0,h=b.length;f<h;f++){var g=b[f];if(g.nodeType===$){if(!0===d){if(null!=g.getAttribute(c)){e.push(g);continue}if(null!=l(g,n)||null!=l(g,F))continue}for(var i=u(g,c,void 0,!1),j=0,q=i.length;j<q;j++){var t=a(i[j])[0],p=t.parentNode;(null==l(p,n)&&null==l(p,F)||p===g)&&e.push(t)}}}return a(e)}function j(a){return a&&a.addEventListener&&a.getModel&&!H(a)&&!d.core.data.isObservableArray(a)||d.core.data.isObservableItem(a)?!0:!1}function t(a,b){for(var c=0,d=a.length;c<
d;c++){var e=a[c];e.nodeType===$&&e.setAttribute(g,b)}}function s(b,c,f){var h=M++,g=c[0];a(g).empty();if(f){!H(f)&&!d.core.data.isObservableArray(f)&&e(T);t(c,h);b._addBindingEntry(f,g,h);d.core.data.isObservableArray(f)&&!b._isWatching(f)&&(c=function(a){b._observableArray_changeListener(a)},b._listeners[b._getContextIndex(f)]=c,f.addEventListener("change",c));var c=l(g,J),c=B(b._getSrcCtxNode(c).childNodes),i=[];b._loopElementsMap[h]=i;for(var h=g.ownerDocument.createDocumentFragment(),j=f.get?
function(a){return f.get(a)}:function(a){return f[a]},n=0,q=f.length;n<q;n++){for(var p=[],s=0,u=c.length;s<u;s++){var o=P(c[s]);p.push(o);h.appendChild(o)}i[n]=p;g.appendChild(h);w(b,p,j(n),!1,!0)}}}function w(a,b,c,f,h){b=O(b);if(f)s(a,b,c);else{f=M++;c&&(("object"!==typeof c||H(c)||d.core.data.isObservableArray(c))&&e(T),t(b,f),a._addBindingEntry(c,b,f));var g=j(c);g&&!a._isWatching(c)&&(f=function(b){a._observableItem_changeListener(b)},a._listeners[a._getContextIndex(c)]=f,c.addEventListener("change",
f));A(b,h).each(function(){p(this,c,g)});i(a,b,c,!1,h);i(a,b,c,!0,h)}}function i(a,b,c,d,e){var h=d?"data-h5-loop-context":"data-h5-context";f(b,h,e).each(function(){var b=l(this,h),e=null;c&&(e=j(c)?c.get(b):c[b]);w(a,this,e,d)})}function p(b,c,d){for(var f=l(b,h).split(ma),g=[],i=[],j=[],n=0,q=f.length;n<q;n++){var t=f[n];if(-1===t.indexOf(L))0<a.trim(t).length&&(g.push(null),i.push(null),j.push(a.trim(t)));else{var p=t.split(L),t=a.trim(p[0]),p=a.trim(p[1]),s=null,o=K.exec(t);o&&(s=o[1],t=/(\S+)[\s\(]/.exec(t)[1]);
0<t.length&&0<p.length&&(g.push(t),i.push(s),j.push(p))}}f=b.tagName.toLowerCase();n=a(b);q=0;for(t=g.length;q<t;q++){var s=g[q],o=i[q],I=j[q],p=null;c&&(p=d?c.get(I):c[I]);null==s&&("input"===f?(s="attr",o="value"):s="text");switch(s){case "text":null==p?n.text(""):n.text(p);break;case "html":null==p?n.html(""):n.html(p);break;case "class":var s=l(b,da),I=(o=null==s)?"":" ",oa=!1;p&&(oa=!RegExp("\\s"+p+"\\s").test(" "+s+" "));n[0].className=(o?"":s)+(oa?I+p:"");break;case "attr":o||e(ea);"input"===
f&&"value"===o?null==p?n.val(""):n.val(p):null==p?n.removeAttr(o):n.attr(o,p);break;case "style":o||e(ea);null==p?n.css(o,""):n.css(o,p);break;default:e(N)}}}function x(a,b,c){for(var d=0,e=c.length;d<e;d++){var f=c[d];b.removeChild(f);a._removeBinding(f)}}function z(a){for(var a=a.childNodes,b=[],c=0,d=a.length;c<d;c++)b.push(P(a[c]));return b}function q(a,b,c,d,e){for(var f=c.ownerDocument.createDocumentFragment(),h=[],g=0,i=e.length;g<i;g++){var j=z(c);h[g]=j;for(var n=0,l=j.length;n<l;n++)f.appendChild(j[n]);
w(a,j,e[g])}Array.prototype[d].apply(b,h);return f}function c(a,b,c,d,e,f){var h=d.length;if(0!==h){for(var g=d[0],i=g,c=1===h?c.length:i+d[1];i<c;i++){var j=e[i];j&&x(a,b,j)}e.splice(g,d[1]);if(!(2>=h)){i=e.length;i=0===i||0===g?b.firstChild:g>=i?null:e[g][0];c=f.ownerDocument.createDocumentFragment();g=[g,0];for(j=2;j<h;j++){for(var n=z(f),l=0,o=n.length;l<o;l++)c.appendChild(n[l]);w(a,n,d[j]);g.push(n)}b.insertBefore(c,i);Array.prototype.splice.apply(e,g)}}}function b(a,b){void 0!==a.nodeType?
a.nodeType===$&&(this._parent=a.parentNode,this._targets=[a]):(this._parent=a[0].parentNode,this._targets=B(a));this._bindRootId=W++;R[this._bindRootId]=this;for(var c=[],d=0,e=this._targets.length;d<e;d++){var f=this._targets[d];if(f.nodeType===$){f.setAttribute(na,this._bindRootId);for(var g=u(f,[n,F],void 0,!0),i=0,j=g.length;i<j;i++){var p=xa++;g[i].setAttribute(J,p)}g=u(f,h,void 0,!0);i=0;for(j=g.length;i<j;i++)p=g[i],/class\s*:/.test(l(p,h))&&""!=p.className&&p.setAttribute(da,p.className)}c.push(f.cloneNode(!0))}this._srces=
c;this._loopElementsMap={};this._rootContext=b;this._usingContexts=[];this._srcToViewMap={};this._listeners={};w(this,this._targets,this._rootContext,!1,!0)}var h="data-h5-bind",n="data-h5-context",F="data-h5-loop-context",J="data-h5-dyn-ctx",g="data-h5-dyn-vid",na="data-h5-dyn-bind-root",da="data-h5-dyn-cn",L=":",ma=";",K=/\(\s*(\S+)\s*\)/,ea=7100,N=7101,T=7102,xa=0,M=0,W=0,R={},ha={},P;(function(){var b=document.createElement("div");b.h5Dummy="a";var c=b.cloneNode(!1),d=void 0!==c.h5Dummy;b.h5Dummy=
void 0;d?(c.h5Dummy=void 0,P=function(b){var c=b.ownerDocument;return b.nodeType===$?a(a.trim(b.outerHTML),c)[0]:b.cloneNode(!0)}):P=function(a){return a.cloneNode(!0)}})();a.extend(b.prototype,{unbind:function(){for(var a=0,b=this._targets.length;a<b;a++){var c=this._targets[a];if(c.nodeType===$){this._removeBinding(c);c.removeAttribute(na);for(var d=u(c,da,void 0,!0),e=0,f=d.length;e<f;e++)d[e].removeAttribute(da);c=u(c,J,void 0,!0);e=0;for(d=c.length;e<d;e++)c[e].removeAttribute(J)}}delete R[this._bindRootId]},
_observableArray_changeListener:function(a){var b=this._getViewsFromSrc(a.target);if(b)for(var d in b)if(b.hasOwnProperty(d)){var e=b[d],f=this._getSrcCtxNode(l(e,J)),h=this._loopElementsMap[d];switch(a.method){case "set":c(this,e,a.target,[a.args[0],1,a.args[1]],h,f);break;case "shift":case "pop":var g=h[a.method]();g&&x(this,e,g);break;case "unshift":g=q(this,h,f,a.method,a.args);e.insertBefore(g,e.firstChild);break;case "push":g=q(this,h,f,a.method,a.args);e.appendChild(g);break;case "splice":c(this,
e,a.target,a.args,h,f);break;case "reverse":for(var g=e,i=h;g.firstChild;)g.removeChild(g.firstChild);for(var j=0,e=i.length;j<e;j++)for(var f=i[j],n=f.length-1;0<=n;n--)g.insertBefore(f[n],g.firstChild);h.reverse();break;case "sort":case "copyFrom":case null:for(var g=this._loopElementsMap,i=d,j=a.target,n=h,h=f,f=0,p=n.length;f<p;f++)x(this,e,n[f]);for(var n=e.ownerDocument.createDocumentFragment(),p=[],f=0,t=j.length;f<t;f++){var o=z(h);p[f]=o;for(var I=0,oa=o.length;I<oa;I++)n.appendChild(o[I]);
w(this,o,j.get(f))}e.appendChild(n);g[i]=p}}},_observableItem_changeListener:function(a){var b=this._getViewsFromSrc(a.target);if(b){var c=!1;a.target===this._rootContext&&(c=!0);var d=this,e;for(e in b)if(b.hasOwnProperty(e)){var h=b[e];A(h,c).each(function(){p(this,a.target,!0)});f(h,n).each(function(){var b=l(this,n);if(!(b in a.props))return!0;d._removeBinding(this);var c=l(this,J),c=d._getSrcCtxNode(c),c=P(c);this.parentNode.replaceChild(c,this);w(d,c,a.props[b].newValue)});f(h,F).each(function(){var b=
l(this,F);if(!(b in a.props)||a.target._isArrayProp(b))return!0;d._removeBinding(this);w(d,this,a.props[b].newValue,!0)})}}},_getSrcCtxNode:function(a){for(var b=0,c=this._srces.length;b<c;b++){var d=this._srces[b];if(l(d,J)===a)return d;d=u(d,J,a);if(0<d.length)return d[0]}return null},_isWatching:function(a){a=this._getContextIndex(a);return-1===a?!1:null!=this._listeners[a]},_getContextIndex:function(b){return a.inArray(b,this._usingContexts)},_addBindingEntry:function(a,b,c){var d=this._getContextIndex(a);
-1===d&&(this._usingContexts.push(a),d=this._usingContexts.length-1);ha[c]=a;(a=this._srcToViewMap[d])?a[c]=b:(a={},a[c]=b,this._srcToViewMap[d]=a)},_hasBindingForSrc:function(a){for(var b in a)if(a.hasOwnProperty(b))return!0;return!1},_removeBindingEntry:function(a){var b=ha[a];if(b){var c=this._getContextIndex(b);if(-1!==c){var e=this._srcToViewMap[c];e&&e[a]&&(delete e[a],this._hasBindingForSrc(e)||(e=!1,j(b)?(b.removeEventListener("change",this._listeners[c]),e=!0):d.core.data.isObservableArray(b)&&
(b.removeEventListener("change",this._listeners[c]),e=!0),e&&delete this._listeners[c],delete this._srcToViewMap[c],this._usingContexts[c]=null))}ha[a]&&delete ha[a]}},_removeBinding:function(a){if(a.nodeType===$){var b=l(a,g);null!=b&&(this._removeBindingEntry(b),a.removeAttribute(g));for(var a=u(a,g),b=0,c=a.length;b<c;b++){var d=a[b];this._removeBindingEntry(l(d,g));d.removeAttribute(g)}}},_getViewsFromSrc:function(a){a=this._getContextIndex(a);return-1===a?null:this._srcToViewMap[a]}});Da={createBinding:function(a,
c){return new b(a,c)}}})();(function(){function l(e){return d.u.obj.isJQueryObject(e)?e:a(e)}function B(){this.__cachedTemplates={}}var u=d.async.deferred,v={escapeHtml:function(a){return d.u.str.escapeHtml(a)}};a.extend(function(){this._templateMap={}}.prototype,{applyToView:function(a){var d=this._templateMap,e;for(e in d)a.register(e,d[e])},register:function(a,d){this._templateMap[a]=d},marge:function(d){a.extend(this._templateMap,d._templateMap)},registByElement:function(d){d=a(d);if(0!==d.length){var j=
this;d.each(function(){var d=a.trim(this.id),f=a.trim(this.innerHTML);d||e(7002,null,{});j.register(d,f)})}}});a.extend(B.prototype,{load:function(f){var j=u(),l=null;switch(a.type(f)){case "string":a.trim(f)||e(7004);l=[f];break;case "array":l=f;0===l.length&&e(7004);for(var f=0,s=l.length;f<s;f++)x(l[f])?a.trim(l[f])||e(7004):e(7004);break;default:e(7004)}for(var s=[],f=0,w=l.length;f<w;f++)s.push(d.res.get(l[f]));var i=this;V(s,function(a){for(var a=H(a)?a:[a],d=[],e,f=0,c=a.length;f<c;f++){for(var b=
a[f].templates,h=0,n=b.length;h<n;h++){if(!i.isValid(b[h].content)){e=b[h];break}d.push(b[h])}if(e)break}if(e)try{i.register(e.id,e.content)}catch(l){return l.detail.url=a[f].url,l.detail.path=a[f].path,j.reject(l)}f=0;for(c=d.length;f<c;f++)i.register(d[f].id,d[f].content);j.resolve()},function(a){j.reject(a)});return j.promise()},getAvailableTemplates:function(){var a=[],d;for(d in this.__cachedTemplates)a.push(d);return a},register:function(d,j){"string"!==a.type(j)?e(7E3,null,{id:d}):(!x(d)||
!a.trim(d))&&e(7002,[]);try{var l=new EJS.Compiler(j,"[");l.compile();this.__cachedTemplates[d]=l.process}catch(s){l=s.lineNumber,e(7010,[l?" line:"+l:"",s.message],{id:d})}},isValid:function(a){try{return(new EJS.Compiler(a,"[")).compile(),!0}catch(d){return!1}},get:function(d,j){var l=this.__cachedTemplates;(!x(d)||!a.trim(d))&&e(7002);(l=l[d])||e(7005,d);var s=j?a.extend(!0,{},j):{},u=s.hasOwnProperty("_h")?new EJS.Helpers(s):new EJS.Helpers(s,{_h:v}),i=null;try{i=l.call(s,s,u)}catch(p){e(7006,
p.toString(),p)}return i},update:function(a,d,e){return l(a).html(this.get(d,e))},append:function(a,d,e){return l(a).append(this.get(d,e))},prepend:function(a,d,e){return l(a).prepend(this.get(d,e))},isAvailable:function(a){return!!this.__cachedTemplates[a]},clear:function(d){if(typeof d===la)this.__cachedTemplates={};else{var j=null;switch(a.type(d)){case "string":j=[d];break;case "array":d.length||e(7002);j=d;break;default:e(7002)}for(var d=0,l=j.length;d<l;d++){var s=j[d];(!x(s)||!a.trim(s))&&
e(7002)}d=0;for(l=j.length;d<l;d++)delete this.__cachedTemplates[j[d]]}},bind:function(f,j){var l=null;null==f&&e(7007);H(f)?l=f:(l=a(f),0===l.length&&e(7007),l=l.toArray());(null==j||"object"!==typeof j||H(j)||d.core.data.isObservableArray(j))&&e(7009);return Da.createBinding(l,j)}});var A=new B;A.createView=function(){return new B};a(function(){a('script[type="text/ejs"]').each(function(){var d=a.trim(this.id),e=a.trim(this.innerHTML);0!==e.length&&d&&(e=new EJS.Compiler(e,"["),e.compile(),A.__cachedTemplates[d]=
e.process)})});d.u.obj.expose("h5.core",{view:A})})();(function(){function e(b){var c={},d;for(d in ha){var f=a("<div></div>").addClass(b).addClass(d).appendTo("body"),m=a.camelCase(d);c[m]={};a.map(ha[d],function(a){c[m][a]="width"===a||"height"===a?parseInt(f.css(a).replace(/\D/g,""),10):f.css(a)});f.remove()}return c}function B(a,b,c){var a=b.createElement("v:"+a),d;for(d in c)a.style[d]=c[d];return a}function u(a,b){for(var c=[],d=a/2,e=0.8*a/2,f=360/b*Math.PI/180,h=1;h<=b;h++){var g=f*h,i=Math.cos(g),
g=Math.sin(g);c.push({from:{x:d+e/2*i,y:d+e/2*g},to:{x:d+e*i,y:d+e*g}})}return c}function v(a){return function(){var b=document.body,c=document.documentElement,d=S?b:aa?c:null;return d?"Height"===a?d["client"+a]>d["scroll"+a]?d["client"+a]:d["scroll"+a]:d["client"+a]:Math.max(b["scroll"+a],c["scroll"+a],b["offset"+a],c["offset"+a],c["client"+a])}}function A(a){return function(){var b=S?document.body:document.documentElement;return window["page"+("Top"===a?"Y":"X")+"Offset"]||b["scroll"+a]}}function f(a){var b=
S?document.body:document.documentElement;return M.isiOS?window["inner"+a]:b["client"+a]}function j(b){var c=a(b)[0],d=document.body,e=a("html")[0],b={top:0,left:0};if(c===d&&aa)return{top:parseFloat(e.currentStyle.paddingTop||0)+parseFloat(d.currentStyle.marginTop||0)+parseFloat(d.currentStyle.borderTop||0),left:parseFloat(e.currentStyle.paddingLeft||0)+parseFloat(d.currentStyle.marginLeft||0)+parseFloat(d.currentStyle.borderLeft||0)};"undefined"!==typeof c.getBoundingClientRect&&(b=c.getBoundingClientRect());
d=S?d:document.documentElement;c=d.clientTop||0;d=d.clientLeft||0;return{top:b.top+ja()-c,left:b.left+ka()-d}}function t(){a.each(ca(arguments),function(a,b){b.bind("click dblclick touchstart touchmove touchend mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave focus focusin focusout blur change select",function(){return!1})})}function s(a){a=W(a)?a[0]:a;return a===window||a===document||a===document.body}function w(a){return Z(N(a)).getComputedStyle(a,null)}function i(b,c){return!Z(N(b)).getComputedStyle?
a(b).css(c):w(b)[c]}function p(b){if(!Z(N(b)).getComputedStyle)return a(b).height();var c=w(b);return b.offsetHeight-parseFloat(c.paddingTop)-parseFloat(c.paddingBottom)}function E(b){if(!Z(N(b)).getComputedStyle)return a(b).width();var c=w(b);return b.offsetWidth-parseFloat(c.paddingLeft)-parseFloat(c.paddingRight)}function z(b,c){if(!Z(N(b)).getComputedStyle)return a(b).outerHeight();var d=w(b);return p(b)+parseFloat(d.paddingTop)+parseFloat(d.paddingBottom)+parseFloat(d.borderTopWidth)+parseFloat(d.borderBottomWidth)+
(c?parseFloat(d.marginTop)+parseFloat(d.marginBottom):0)}function q(b,c){if(!Z(N(b)).getComputedStyle)return a(b).outerWidth();var d=w(b);return E(b)+parseFloat(d.paddingLeft)+parseFloat(d.paddingRight)+parseFloat(d.borderLeftWidth)+parseFloat(d.borderRightWidth)+(c?parseFloat(d.marginLeft)+parseFloat(d.marginRight):0)}function c(b){if(!Z(N(b)).getComputedStyle)return a(b).innerHeight();var c=w(b);return p(b)+parseFloat(c.paddingTop)+parseFloat(c.paddingBottom)}function b(b){if(!Z(N(b)).getComputedStyle)return a(b).innerWidth();
var c=w(b);return E(b)+parseFloat(c.paddingLeft)+parseFloat(c.paddingRight)}function h(b,c,d,e){function f(){g+=h;g>d?(clearInterval(n),c.each(function(a){for(var c in b[a])this.style[c]=""}),e()):c.each(function(b){var c=i[b],d;for(d in c)c[d]+=j[b][d];a(this).css(c)})}var h=xa,g=0,i=[],j=[];c.each(function(a){var e=b[a];j[a]={};i[a]={};var f=w(c[a]),m;for(m in e)i[a][m]=parseFloat(f[m]),j[a][m]=(parseFloat(e[m])-parseFloat(f[m]))*h/d});f();var n=setInterval(f,h)}function n(a,b,c){var d=[];a.each(function(){var a=
parseFloat(i(this,"opacity"));d.push({opacity:a})});a.css({opacity:0,display:"block"});h(d,a,b,c)}function F(a,b,c){var d=[];a.each(function(){d.push({opacity:0})});h(d,a,b,c)}function J(b,c){this.style=a.extend(!0,{},b);if(!c.getElementById(ea)){c.namespaces.add("v","urn:schemas-microsoft-com:vml");var d=c.createElement("style");c.getElementsByTagName("head")[0].appendChild(d);d.id=ea;d.setAttribute("type","text/css");d.styleSheet.cssText="v\\:stroke,v\\:line,v\\:textbox { behavior:url(#default#VML); }"}d=
this.style.throbber.width;this.group=B("group",c,{width:d+"px",height:this.style.throbber.height+"px"});this.group.className=O;for(var d=u(d,this.style.throbber.lines),e=this.style.throbberLine.color,f=this.style.throbberLine.width,h=0,g=d.length;h<g;h++){var i=d[h],j=i.from,n=i.to,i=B("line",c);i.strokeweight=f;i.strokecolor=e;i.fillcolor=e;i.from=j.x+","+j.y;i.to=n.x+","+n.y;j=B("stroke",c);j.opacity=1;i.appendChild(j);this.group.appendChild(i)}this._createPercentArea(c)}function g(b,c){var f=this,
h=a(b);if(h.length){var m=s(h),h=m?a("body"):h,g=N(h[0]);if(g!==window.document&&(h[0]===g||Z(g)===h[0]))h=a(g.body);var i=a.extend(!0,{},{message:"",percent:-1,block:!0,fadeIn:-1,fadeOut:-1,promises:null,theme:"a",showThrobber:!0},c);this._displayed=!1;this._throbbers=[];this._settings=i;this._styles=a.extend(!0,{},{throbber:{roundTime:1E3,lines:12},throbberLine:{},percent:{}},e(i.theme));i.throbber&&a.extend(this._styles.throbber,i.throbber);this._isScreenLock=m;this._$target=h;this._target=1===
this._$target.length?this._$target[0]:this._$target.toArray();this._scrollEventTimerId=null;this._scrollHandler=function(){f._handleScrollEvent()};this._resizeEventTimerId=null;this._resizeHandler=function(){f._handleResizeEvent()};this._redrawable=!0;this._lastPercent=-1;this._lastMessage=null;this._fadeInTime="number"===typeof i.fadeIn?i.fadeIn:-1;this._fadeOutTime="number"===typeof i.fadeOut?i.fadeOut:-1;this._$content=a();this._$overlay=a();this._$skin=a();this._showContent=i.showThrobber||i.message;
for(var h=d.u.str.format(R,""===i.message?'style="display: none;"':"",i.message),m="https"===document.location.protocol?"return:false":"about:blank",j=0,n=this._$target.length;j<n;j++)this._$content=this._$content.add(a(g.createElement("div")).append(h).addClass(na).addClass(i.theme).addClass(da).css("display","none")),this._$overlay=this._$overlay.add((i.block?a(g.createElement("div")):a()).addClass(na).addClass(i.theme).addClass(L).css("display","none")),this._$skin=this._$skin.add((aa||S?a(g.createElement("iframe")):
a()).attr("src",m).addClass(na).addClass(ma).css("display","none"));var p=this._isScreenLock&&C?"fixed":"absolute";a.each([this._$overlay,this._$content],function(){this.css("position",p)});g=i.promises;i=function(){f.hide()};h=a.hasOwnProperty("curCSS")?"pipe":"then";H(g)?(g=a.map(g,function(a){return a&&K(a.promise)?a:null}),0<g.length&&qa(d.async.when(g),h,[i,i])):g&&K(g.promise)&&qa(g,h,[i,i])}}var na="h5-indicator",da="content",L="overlay",ma="skin",O="vml-root",ea="h5-vmlstyle",R='<span class="indicator-throbber"></span><span class="indicator-message" {0}>{1}</span>',
T=500,xa=13,M=d.env.ua,W=d.u.obj.isJQueryObject,ca=d.u.obj.argsToArray,ha={throbber:["width","height"],"throbber-line":["width","color"]},P=!!document.createElement("canvas").getContext,y=function(){var a=document.createDocumentFragment().appendChild(document.createElement("div"));a.innerHTML='<v:line strokeweight="1"/>';a=a.firstChild;a.style.behavior="url(#default#VML)";return"number"===typeof a.strokeweight}(),S="CSS1Compat"!==document.compatMode,aa=M.isIE&&6>=M.browserVersion,C=!(M.isAndroidDefaultBrowser||
M.isiOS&&5>M.browserVersion||aa||S||M.isWindowsPhone),ia=null,Y=null,$=null,ba=null,ja=null,ka=null,fa=function(){var b=document.createDocumentFragment().appendChild(document.createElement("div")),c=["Webkit","Moz","O","ms","Khtml"],d=c.length;return function(e){e=a.camelCase(e);if(e in b.style)return!0;for(var e=e.charAt(0).toUpperCase()+e.slice(1),f=0;f<d;f++)if(c[f]+e in b.style)return!0;return!1}}(),Y=function(a){return function(){var b=document.body,c=document.documentElement;return"number"===
typeof window["inner"+a]?window["inner"+a]:S?b["client"+a]:c["client"+a]}}("Height"),$=v("Height"),ba=v("Width"),ja=A("Top"),ka=A("Left"),ia=fa("animationName");J.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.group),this._run())},hide:function(){this.root.innerHTML="";this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){var a=this.style.throbber.lines;if(0!==a){for(var b=this.style.throbber.roundTime,c=this.highlightPos,
d=this.group.childNodes,e=0,f=d.length;e<f;e++){var h=d[e];if("textbox"!==h.nodeName){var g=e+1;h.firstChild.opacity=g==c?"1":g==c+1||g==c-1?"0.75":"0.4"}}c==a?c=0:c++;this.highlightPos=c;var i=this;this._runId=setTimeout(function(){i._run.call(i)},Math.floor(b/a))}},_createPercentArea:function(b){var c=B("textbox",b),b=a(b.createElement("table"));b.append("<tr><td></td></tr>");var d=b.find("td");d.width(this.group.style.width);d.height(this.group.style.height);d.css("line-height",this.group.style.height);
d.addClass("throbber-percent");c.appendChild(b[0]);this.group.appendChild(c)},setPercent:function(b){a(this.group).find(".throbber-percent").html(b)}};var V=function(b,c){this.style=a.extend(!0,{},b);this.canvas=c.createElement("canvas");this.baseDiv=c.createElement("div");this.percentDiv=c.createElement("div");var d=this.canvas,e=this.baseDiv,f=this.percentDiv;d.width=this.style.throbber.width;d.height=this.style.throbber.height;d.style.display="block";d.style.position="absolute";e.style.width=this.style.throbber.width+
"px";e.style.height=this.style.throbber.height+"px";e.appendChild(d);f.style.width=this.style.throbber.width+"px";f.style.height=this.style.throbber.height+"px";f.style.lineHeight=this.style.throbber.height+"px";f.className="throbber-percent";e.appendChild(f);this.positions=u(d.width,this.style.throbber.lines)};V.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.baseDiv),this._run())},hide:function(){a(this.baseDiv).remove();this._runId&&(clearTimeout(this._runId),
this._runId=null)},_run:function(){var a=this.style.throbber.lines;if(0!==a){var b=this.canvas,c=b.getContext("2d"),d=this.highlightPos,e=this.positions,f=this.style.throbberLine.color,h=this.style.throbberLine.width,g=this.style.throbber.roundTime;b.width=b.width;for(var i=0,j=e.length;i<j;i++){c.beginPath();c.strokeStyle=f;c.lineWidth=h;var n=i+1;c.globalAlpha=n==d?1:n==d+1||n==d-1?0.75:0.4;var l=e[i],n=l.from,l=l.to;c.moveTo(n.x,n.y);c.lineTo(l.x,l.y);c.stroke()}d==a?d=0:d++;this.highlightPos=
d;if(ia)b.className="throbber-canvas";else{var p=this;this._runId=setTimeout(function(){p._run.call(p)},Math.floor(g/a))}}},setPercent:function(a){this.percentDiv.innerHTML=a}};g.prototype={show:function(){if(this._displayed||!this._$target||0<this._$target.children("."+na).length)return this;this._displayed=!0;for(var b=this,c=this._fadeInTime,d=function(){var c=a(window);b._isScreenLock&&(t(b._$overlay,b._$content),C||(c.bind("touchmove",b._scrollHandler),c.bind("scroll",b._scrollHandler)));c.bind("orientationchange",
b._resizeHandler);c.bind("resize",b._resizeHandler)},e=0,f=this._$target.length;e<f;e++){var h=this._$target.eq(e),g=this._$content.eq(e),j=this._$skin.eq(e),l=this._$overlay.eq(e),p=this._settings,q=i(h[0],"position");!this._isScreenLock&&"static"===q&&(h.data("before-position",q),h.data("before-zoom",i(h[0],"zoom")),h.css({position:"relative",zoom:"1"}));var q=N(h[0]),s=null;p.showThrobber&&(s=P?new V(this._styles,q):y?new J(this._styles,q):null);s&&(b._throbbers.push(s),b.percent(this._settings.percent),
s.show(g.children(".indicator-throbber")[0]));h.append(j).append(l);this._showContent&&h.append(g)}e=this._$skin.toArray();Array.prototype.push.apply(e,this._$content.toArray());Array.prototype.push.apply(e,this._$overlay.toArray());e=a(e);0>c?(e.css("display","block"),d()):n(e,c,d);this._reposition();this._resizeOverlay();return this},_resizeOverlay:function(){var a,b;if(!(this._isScreenLock&&C||0===this._$overlay.length))for(var c=0,d=this._$target.length;c<d;c++){var e=this._$content.eq(c),f=this._$overlay.eq(c);
b=this._$target.eq(c);var h=this._$skin.eq(c);if(this._isScreenLock)e=ba(),b=$();else{f.css("display","none");e.css("display","none");var g=b[0];a=g.scrollWidth;b=g.scrollHeight;if(aa)a=Math.max(a,g.clientWidth),b=Math.max(b,g.clientHeight);else if(M.isIE&&"function"===typeof getComputedStyle){var g=Z(N(g)).getComputedStyle(g,null),i=parseFloat(g.width)+parseFloat(g.paddingLeft)+parseFloat(g.paddingRight);a+=i-parseInt(i)-1;g=parseFloat(g.height)+parseFloat(g.paddingTop)+parseFloat(g.paddingBottom);
b+=g-parseInt(g)-1}f.css("display","block");e.css("display","block");e=a}f[0].style.width=e+"px";f[0].style.height=b+"px";if(aa||S)h[0].style.width=e+"px",h[0].style.height=b+"px"}},_reposition:function(){for(var d=0,e=this._$target.length;d<e;d++){var f=this._$target.eq(d),h=this._$content.eq(d);if(this._isScreenLock){var g=Y();C?h.css("top",(g-z(h[0]))/2+"px"):h.css("top",ja()+g/2-z(h[0])/2+"px")}else h.css("top",f.scrollTop()+(c(f[0])-z(h[0]))/2);var g=b(h[0])-E(h[0]),j=0;h.children().each(function(){var b=
a(this);if("none"===i(b[0],"display"))return!0;j+=q(this,!0)});h.css("width",j+g);h.css("left",f.scrollLeft()+(b(f[0])-q(h[0]))/2)}},hide:function(){if(!this._displayed)return this;this._displayed=!1;var b=this,c=this._fadeOutTime,d=this._$skin.toArray();Array.prototype.push.apply(d,this._$content.toArray());Array.prototype.push.apply(d,this._$overlay.toArray());for(var e=a(d),d=function(){var c=a(window);e.remove();b._isScreenLock||b._$target.each(function(b,c){var d=a(c);d.css({position:d.data("before-position"),
zoom:d.data("before-zoom")});d.removeData("before-position").removeData("before-zoom")});c.unbind("touchmove",b._scrollHandler);c.unbind("scroll",b._scrollHandler);c.unbind("orientationchange",b._resizeHandler);c.unbind("resize",b._resizeHandler);b._resizeEventTimerId&&clearTimeout(b._resizeEventTimerId);b._scrollEventTimerId&&clearTimeout(b._scrollEventTimerId)},f=0,h=this._throbbers.length;f<h;f++)this._throbbers[f].hide();0>c?(e.css("display","none"),d()):F(e,c,d);return this},percent:function(a){if("number"!==
typeof a||!(0<=a&&100>=a))return this;if(!this._redrawable)return this._lastPercent=a,this;for(var b=0,c=this._throbbers.length;b<c;b++)this._throbbers[b].setPercent(a);return this},message:function(a){if(!x(a))return this;if(!this._redrawable)return this._lastMessage=a,this;(this._showContent=this._settings.showThrobber||!!a)?this._$target.append(this._$content):this._$content.remove();this._$content.children(".indicator-message").css("display","inline-block").text(a);this._reposition();return this},
_handleScrollEvent:function(){this._scrollEventTimerId&&clearTimeout(this._scrollEventTimerId);if(this._redrawable){var a=this;this._scrollEventTimerId=setTimeout(function(){a._reposition();a._scrollEventTimerId=null},50)}},_handleResizeEvent:function(){function a(){b._resizeOverlay();b._reposition();b._redrawable=!0;b.percent(b._lastPercent);b.message(b._lastMessage);b._resizeEventTimerId=null}var b=this;this._resizeEventTimerId&&clearTimeout(this._resizeEventTimerId);this._redrawable=!1;C||aa||
S?a():this._resizeEventTimerId=setTimeout(function(){a()},1E3)}};d.u.obj.expose("h5.ui",{indicator:function(b,c){return a.isPlainObject(b)?new g(b.target,b):new g(b,c)},isInView:function(b,c){var d,e,h,g,i=a(b);if(typeof c===la)e=f("Height"),g=f("Width"),d=ja(),h=ka();else{g=a(c);if(0===g.find(i).length)return;h=j(g);d=h.top+parseInt(g.css("border-top-width"));h=h.left+parseInt(g.css("border-left-width"));e=g.innerHeight();g=g.innerWidth()}e=d+e;g=h+g;var n=j(i),l=n.top,n=n.left,p=l+i.outerHeight(),
i=n+i.outerWidth();return(d<=l&&l<e||d<p&&p<=e)&&(h<=n&&n<g||h<i&&i<=g)},scrollToTop:function(){function b(){1===window.scrollY&&(c=0);0<c&&(window.scrollTo(0,1),c--,setTimeout(b,T))}var c=3;window.scrollTo(0,1);1!==a(window).scrollTop()&&setTimeout(b,T)}})})();(function(){function l(){var c=a.mobile.activePage,c=c&&c[0]&&c[0].id;return x(c)&&0<c.length?c:null}function B(){var c=l();null!==c&&a(function(){f.addCSS(c);f.bindController(c)})}function u(a,b){for(var d in t)for(var e=t[d],f=a===d,i=0,
g=e.length;i<g;i++){var j=e[i];if(f)j[(b?"enable":"disable")+"Listeners"]()}for(d in s){e=s[d];f=a===d;i=0;for(g=e.length;i<g;i++)if(j=e[i],f)j[(b?"enable":"disable")+"Listeners"]()}}function v(a,b){a=a.replace(/(\.0+)+$/,"");b=b.replace(/(\.0+)+$/,"");if(a===b)return 0;for(var d=a.split("."),e=b.split("."),f=d.length,i=0;i<f;i++){if(null==e[i])return 1;var g=parseInt(d[i],10),j=parseInt(e[i],10);if(g!==j)return g<j?-1:1}return null!=e[f]?-1:0}var A,f=null,j={},t={},s={},w={},i={},p=!1,E=!1,z=!1;
d.u.obj.ns("h5.ui.jqm");d.ui.jqm.dataPrefix="h5";var q={__name:"JQMController",__ready:function(){var c=this,b=l();a(':jqmData(role="page"), :jqmData(role="dialog")').each(function(){c.loadScript(this.id)});var d=this.$find("#"+b);d.one("h5controllerready.emulatepageshow",function(){z&&d[0]===a.mobile.activePage[0]&&d.trigger("h5jqmpageshow",{prevPage:a("")})})},':jqmData(role="page"), :jqmData(role="dialog") pageinit':function(a){A||this._initPage(a.event.target.id)},':jqmData(role="page"), :jqmData(role="dialog") pagecreate':function(a){A&&
this._initPage(a.event.target.id)},_initPage:function(a){this.loadScript(a);this.addCSS(a);this.bindController(a)},"{rootElement} pageremove":function(c){a(c.event.target).trigger("h5jqmpagehide",{nextPage:a.mobile.activePage});E=!0;var c=c.event.target.id,b=t[c],d=s[c];if(b){for(var e=0,f=b.length;e<f;e++)b[e].dispose();t[c]=[]}if(d){e=0;for(f=d.length;e<f;e++)d[e].dispose();s[c]=[]}},"{rootElement} pagebeforeshow":function(a){a=a.event.target.id;this.addCSS(a);u(a,!0)},"{rootElement} pagehide":function(c){E||
a(c.event.target).trigger("h5jqmpagehide",{nextPage:c.evArg.nextPage});E=!1;c=c.event.target.id;u(c,!1);this.removeCSS(c)},"{rootElement} pageshow":function(c){var b=!1,d=a(c.event.target),e=c.evArg?c.evArg.prevPage:a("");if(c=t[d[0].id])for(var f=0,i=c.length;f<i;f++)if(!c[f].isReady){d.unbind("h5controllerready.emulatepageshow").one("h5controllerready.emulatepageshow",function(){a.mobile.activePage[0]===d[0]&&d.trigger("h5jqmpageshow",{prevPage:e})});b=!0;break}b||d.trigger("h5jqmpageshow",{prevPage:e})},
"{rootElement} h5controllerbound":function(c){c=c.evArg;if(this!==c){var b=l();null!==b&&-1===a.inArray(c,t[b])&&(s[b]||(s[b]=[]),s[b].push(c))}},"{rootElement} h5controllerunbound":function(c){var b=c.evArg,c=l();null!==c&&(b=a.inArray(b,s[c]),-1!==b&&s[c].splice(b,1))},loadScript:function(c){var c=a("#"+c),b=a.trim(c.data(this.getDataAttribute("script")));if(0!==b.length)return b=a.map(b.split(","),function(b){return a.trim(b)}),c=!0==c.data(this.getDataAttribute("async")),d.u.loadScript(b,{async:c})},
getDataAttribute:function(a){var b=d.ui.jqm.dataPrefix;null==b&&(b="h5");return 0!==b.length?b+"-"+a:a},bindController:function(a){var b=j[a],e=w[a];if(b&&0!==b.length){t[a]||(t[a]=[]);for(var f=t[a],i=0,l=b.length;i<l;i++){for(var g=b[i],p=!1,q=0,s=f.length;q<s;q++){var u=f[q];if(u&&u.__name===g.__name){p=!0;break}}p||t[a].push(d.core.controller("#"+a,g,e[i]))}}},addCSS:function(c){if(c=i[c])for(var b=document.getElementsByTagName("head")[0],d=b.getElementsByTagName("link"),e=d.length,f=0,j=c.length;f<
j;f++){for(var g=a.mobile.path.parseUrl(c[f]).filename,l=!1,p=0;p<e;p++)if(a.mobile.path.parseUrl(d[p].href).filename===g){l=!0;break}l||(g=document.createElement("link"),g.type="text/css",g.rel="stylesheet",g.href=c[f],b.appendChild(g))}},removeCSS:function(c){var b=i[c];if(b&&(c=l(),null!==c)){var d=i[c];a("link").filter(function(){var c=a(this).attr("href");return-1!==a.inArray(c,b)&&-1===a.inArray(c,d)}).remove()}}};d.u.obj.expose("h5.ui.jqm.manager",{init:function(){p||(p=!0,A=0<=v(a.mobile.version,
"1.4"),a(document).one("pageshow",function(){z=!0}),a(function(){f=fa.controllerInternal("body",q,null,{managed:!1});B()}))},define:function(c,b,d,f){x(c)||e(12E3,"id");null!=b&&!x(b)&&!H(b)&&e(12E3,"cssSrc");null!=d&&((x(d)||H(d))&&e(12001),(!a.isPlainObject(d)||!("__name"in d))&&e(12E3,"controllerDefObject"),null!=f&&!a.isPlainObject(f)&&e(12E3,"initParam"));i[c]||(i[c]=[]);j[c]||(j[c]=[]);w[c]||(w[c]=[]);a.merge(i[c],a.map(a.makeArray(b),function(b){return a.inArray(b,i[c])!==-1?null:b}));d&&-1===
a.inArray(d,j[c])&&(j[c].push(d),w[c].push(f));p&&null!==l()?B():this.init()}})})();(function(){function l(){v||(v=navigator.geolocation);return v}function B(a,d){this.oblateness=a;this.semiMajorAxis=d}function u(){}var v=null,x=d.env.ua;B.prototype.getOblateness=function(){return this.oblateness};B.prototype.getSemiMajorAxis=function(){return this.semiMajorAxis};var f=new B(298.257222,6378137),j=new B(299.152813,6377397.155),t=Math.PI/180;a.extend(u.prototype,{isSupported:x.isIE&&9<=x.browserVersion?
!0:!!l(),getCurrentPosition:function(a){var e=d.async.deferred();l().getCurrentPosition(function(a){e.resolve(a)},function(a){e.reject(R(2002,null,a))},a);return e.promise()},watchPosition:function(a){function e(){}var f=d.async.deferred(),j=l().watchPosition(function(a){f.notify(a)},function(a){l().clearWatch(j);f.reject(R(2002,null,a))},a);e.prototype.unwatch=function(){l().clearWatch(j);f.resolve()};return f.promise(new e)},getDistance:function(a,d,i,j,l){(!isFinite(a)||!isFinite(d)||!isFinite(i)||
!isFinite(j))&&e(2E3);var u=l?l:f;u instanceof B||e(2001);var l=u.getSemiMajorAxis(),q=u.getOblateness(),a=a*t,d=d*t,i=i*t,u=j*t,j=(a+i)/2,q=Math.sqrt(2*q-1)/q,q=Math.pow(q,2),c=Math.sqrt(1-q*Math.pow(Math.sin(j),2)),q=l*(1-q)/Math.pow(c,3),l=l/c,d=d-u;return Math.sqrt(Math.pow(q*(a-i),2)+Math.pow(l*Math.cos(j)*d,2))},GS_GRS80:f,GS_BESSEL:j});d.u.obj.expose("h5.api",{geo:new u})})();(function(){function l(a){if(a){var c=a.deferred;(Ka(c)||La(c)||!a.result)&&e(p)}}function B(b,c,d){if(a.isPlainObject(b))for(var f in b){var i=
a.trim(f).replace(/ +/g," ").split(" "),g=[];""===i[0]?e(z):1===i.length?(g.push(i[0]),g.push("="),g.push("?")):/^(<=|<|>=|>|=|!=|like)$/i.test(i[1])?3===i.length&&/^like$/i.test(i[1])?(g.push(i[0]),g.push(i[1]),g.push("?"),g.push("ESCAPE"),g.push('"'+i[2]+'"')):(g.push(i[0]),g.push(i[1]),g.push("?")):e(E);c.push(g.join(" "));d.push(b[f])}}function u(){}function v(){this._multiple=!1}function A(a){this._db=a;this._df=q();this._tx=null;this._tasks=[];this._queue=[]}function f(a,c,d){this._statements=
[];this._parameters=[];this._executor=a;this._tableName=c;this._columns=H(d)?d.join(", "):"*";this._orderBy=this._where=null}function j(a,c,d){this._statements=[];this._parameters=[];this._executor=a;this._tableName=c;this._values=d?O(d):[];this._df=q();this._multiple=!0}function t(a,c,d){this._statements=[];this._parameters=[];this._executor=a;this._tableName=c;this._values=d;this._where=null}function s(a,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=c;this._where=null}
function w(a,c,d){this._statements=[];this._parameters=[];this._executor=a;this._statements.push(c);this._parameters.push(d||[])}function i(a){this._db=a}var p=3E3,E=3003,z=3011,q=d.async.deferred,c=d.u.str.format;a.extend(v.prototype,{execute:function(){return this._executor.add(this)._execute(function(a){return a[0]})}});a.extend(A.prototype,{_runTransaction:function(){return null!=this._tx},_addTask:function(a){this._tasks.push({deferred:a,result:null})},_setResult:function(a){this._getRecentTask().result=
a},_getRecentTask:function(){return this._tasks[this._tasks.length-1]},add:function(a){a instanceof v||e(3009);var c=this._getRecentTask();(!c||c.result)&&this._queue.push(a);return this},_execute:function(a){function c(){if(0===f.length){var i=a(g);d._setResult.apply(d,[i]);e.notify(i,d)}else{for(var j=f.shift(),l=j._statements,p=j._parameters,s=q().resolve().promise(),i=[],t=0,u=l.length;t<u;t++)(function(a,b){s=Y(s,function(){var c=q();d._tx.executeSql(a,b,function(a,b){i.push(j._onComplete(b));
c.resolve()});return c.promise()})})(l[t],p[t]);Y(s,function(){g.push(j._multiple?i:i[0]);c()})}}var d=this,e=this._df,f=this._queue,g=[];try{l(this._getRecentTask());this._addTask(e);for(var i=0,j=f.length;i<j;i++)f[i]._buildStatementAndParameters();this._runTransaction()?c():this._db.transaction(function(a){d._tx=a;c()},function(a){d._tx=null;for(var b=d._tasks,c=b.length-1;0<=c;c--)b[c].deferred.reject(R(3010,["SQLDB ERROR(code="+a.code+")",a.message],a))},function(){d._tx=null;for(var a=d._tasks,
b=a.length-1;0<=b;b--){var c=a[b];c.deferred.resolve(c.result)}})}catch(p){e.reject(p)}this._df=q();return e.promise()},execute:function(){return this._execute(function(a){return a})},promise:function(){return this._df.promise()}});f.prototype=new v;a.extend(f.prototype,{where:function(b){!a.isPlainObject(b)&&!x(b)&&e(3004,["Select","where"]);this._where=b;return this},orderBy:function(b){!a.isPlainObject(b)&&!x(b)&&e(3004,["Select","orderBy"]);this._orderBy=O(b);return this},_buildStatementAndParameters:function(){var b=
"",d=this._where,b=c("SELECT {0} FROM {1}",this._columns,this._tableName);if(a.isPlainObject(d)){var e=[];B(d,e,this._parameters);b+=" WHERE "+e.join(" AND ")}else x(d)&&(b+=" WHERE "+d);H(this._orderBy)&&(b+=" ORDER BY "+this._orderBy.join(", "));this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rows}});j.prototype=new v;a.extend(j.prototype,{_buildStatementAndParameters:function(){var b=this._values,d=this._statements,e=this._parameters;if(0===b.length)d.push(c("INSERT INTO {0} DEFAULT VALUES",
this._tableName)),e.push([]);else for(var f=0,i=b.length;f<i;f++){var g=b[f];if(null==g)d.push(c("INSERT INTO {0} DEFAULT VALUES",this._tableName)),e.push([]);else if(a.isPlainObject(g)){var j=[],l=[],p=[],q;for(q in g)j.push("?"),l.push(q),p.push(g[q]);d.push(c("INSERT INTO {0} ({1}) VALUES ({2})",this._tableName,l.join(", "),j.join(", ")));e.push(p)}}},_onComplete:function(a){return a.insertId}});t.prototype=new v;a.extend(t.prototype,{where:function(b){!a.isPlainObject(b)&&!x(b)&&e(3004,["Update",
"where"]);this._where=b;return this},_buildStatementAndParameters:function(){var b="",d=this._where,b=this._values,e=[],f;for(f in b)e.push(f+" = ?"),this._parameters.push(b[f]);b=c("UPDATE {0} SET {1}",this._tableName,e.join(", "));a.isPlainObject(d)?(f=[],B(d,f,this._parameters),b+=" WHERE "+f.join(" AND ")):x(d)&&(b+=" WHERE "+d);this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});s.prototype=new v;a.extend(s.prototype,{where:function(b){!a.isPlainObject(b)&&
!x(b)&&e(3004,["Del","where"]);this._where=b;return this},_buildStatementAndParameters:function(){var b="",d=this._where,b=c("DELETE FROM {0}",this._tableName);if(a.isPlainObject(d)){var e=[];B(d,e,this._parameters);b+=" WHERE "+e.join(" AND ")}else x(d)&&(b+=" WHERE "+d);this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});w.prototype=new v;a.extend(w.prototype,{_buildStatementAndParameters:function(){},_onComplete:function(a){return a}});
a.extend(i.prototype,{select:function(a,c,d){x(a)||e(3001,"select");!H(c)&&"*"!==c&&e(3005,"select");return new f(this.transaction(d),a,c)},insert:function(b,c,d){x(b)||e(3001,"insert");null!=c&&!H(c)&&!a.isPlainObject(c)&&e(3006,"insert");return new j(this.transaction(d),b,c)},update:function(b,c,d){x(b)||e(3001,"update");a.isPlainObject(c)||e(3006,"update");return new t(this.transaction(d),b,c)},del:function(a,c){x(a)||e(3001,"del");return new s(this.transaction(c),a)},sql:function(a,c,d){x(a)||
e(3007,"sql");null!=c&&!H(c)&&e(3008,"sql");return new w(this.transaction(d),a,c)},transaction:function(a){void 0!=a&&!(a instanceof A)&&e(3002,"transaction");return a?a:new A(this._db)}});a.extend(u.prototype,{isSupported:!!window.openDatabase,open:function(a,c,d,e){if(this.isSupported)return a=openDatabase(a,c,d,e),new i(a)}});d.u.obj.expose("h5.api",{sqldb:new u})})();(function(){function e(a){this._storage=a}a.extend(e.prototype,{getLength:function(){return this._storage.length},key:function(a){return this._storage.key(a)},
getItem:function(a){a=this._storage.getItem(a);return null===a?null:d.u.obj.deserialize(a)},setItem:function(a,e){this._storage.setItem(a,d.u.obj.serialize(e))},removeItem:function(a){this._storage.removeItem(a)},clear:function(){this._storage.clear()},each:function(a){for(var d=this._storage,e=0,l=d.length;e<l;e++){var f=d.key(e);a(e,f,this.getItem(f))}}});d.u.obj.expose("h5.api.storage",{isSupported:window.localStorage?function(){try{return window.localStorage.setItem("__H5_WEB_STORAGE_CHECK__",
"ok"),window.localStorage.removeItem("__H5_WEB_STORAGE_CHECK__"),!0}catch(a){return!1}}():!1,local:new e(window.localStorage),session:new e(window.sessionStorage)})})();(function(){function l(a){for(var a=d.core.controllerManager.getControllers(a,{deep:!0}),b=0,c=a.length;b<c;b++)fa.isDisposing(a[b])||a[b].dispose()}function B(b,c){var d=a(b).filter(c),e=a(b).find(c);if(0===d.length)return e;if(0===e.length)return d;d=a.makeArray(d);e=a.makeArray(e);return a(d.concat(e))}function u(b){b=a(b).closest("["+
T+"],["+V+"]");return b.length?b.get(0):null}function v(b){b=a(b).closest("["+W+"],["+M+"]");return b.length?b.get(0):null}function A(a,b){if(a===b)return!0;var c=v(a),d=b?v(b):null;return c!==d?!1:u(a)===b}function f(b,c,f){var h=b?b:document.body,b=a(h);if(0!==b.length){1!==b.length&&e(aa);if(!I&&d.settings.scene.autoCreateMainContainer){var i=B(h,"["+W+"]");0===i.length&&(i=B(h,"main"),0===i.length&&h===document.body&&(i=a(h)),0<i.length&&i.eq(0).attr(W,W))}if(b.is("["+M+"]"))g(h);else if(b.is("["+
W+"]"))g(h,!0);else{var l=a(h).is("["+T+"],["+V+"]")&&!j(h),n=l?d.async.deferred():null,o=a(h).is("["+T+"],["+V+"]")?h:u(h),p=!1;B(h,"["+ea+"]").each(function(){for(var b=this.getAttribute(ea).split(","),d=0,e=b.length;d<e;d++){var g=a.trim(b[d]);if(""===g||c&&g!==c)return!0;if(j(this,g))console.debug("同一コントローラーバインド回避:"+g);else{if(!A(this,o))return!0;var i=!1;l&&!p&&this===h&&(i=p=!0);t(this,g);g=w(g,this,i?f:null);i&&g.done(function(a){n.resolve(a)})}}});b.find("["+W+"],["+M+"]").each(function(){if(A(this,
o))return!0;var b=a(this);b.is("["+W+"]")?g(this,!0):b.is("["+M+"]")&&g(this)});if(l)return n.promise()}}}function j(b,c){var d=a(b).attr(Z);if(!d)return!1;d=d.split(",");if(!c&&0<d.length)return!0;for(var e=0;e<d.length;e++)if(a.trim(d[e])===c)return!0;return!1}function t(b,c){var d=a(b).attr(Z)||"";d&&(d+=",");a(b).attr(Z,d+c)}function s(b,c,g){var h=b?b:document.body,i=d.async.deferred(),b=!1,l=null,n=a(h).find(">["+T+"]");0<n.length&&(l=n.eq(0),j(l)||(b=!0,l.is("["+ea+"]")||(t(l,ba.__name),l=
d.core.controller(l,ba,g),i.resolve(l))));b||(h=a(h).children().eq(0).filter("["+V+"]"),0<h.length&&!j(h)&&(b=!0,h.attr(T,T),n=h,h.is("["+ea+"]")||(t(h,ba.__name),l=d.core.controller(h,ba,g),i.resolve(l))));b||e(C);c=f(n.get(0),c,g);"resolved"!==i.state()&&c.done(function(a){i.resolve(a)});return i.promise()}function w(a,b,c){var e=d.async.deferred();d.res.get(a).then(function(a){a=d.core.controller(b,a,c);e.resolve(a)});return e.promise()}function i(a,b){this.type=a;this.data=b}function p(b,c){this.type=
b;this._targetWindow=c;this._closed=!1;this._subscribers=[];var d=this;this._recv=function(a){d._receiveMessage(a.originalEvent)};a(window).on("message",this._recv)}function E(a,b){var c=ja[a];c||(c=new p(a,b),ja[a]=c);return c}function z(){this._recvChannel=new p(y,window.opener);this._recvChannel.subscribe(this._receive,this);this._sendChannel=new p(S,window.opener)}function q(a){this.targetWindow=a;this.id="FIXME";this._invocationMap={};this._invocationSeq=d.core.data.createSequence(1,1,d.core.data.SEQ_INT);
this._sendChannel=E(y,a);this._recvChannel=E(S,a);this._recvChannel.subscribe(this._receive,this)}function c(){}function b(a,b,c,d){this.window=a=window.open(a,b,c);this._isModal=!1;this._parentBlocker=null;this.setModal(!0===d?!0:!1);this._rmi=new q(a);this._watchChild()}function h(b){var b=a(b),c=b.children();if(!1===c.eq(0).is("["+T+"],["+V+"]")&&(console.info("シーンコンテナ直下先頭にシーン要素が見つからないため、シーン要素でラップします。"),c.wrapAll(a("<div "+T+"></div>")),c=b.attr(ea)))console.info("シーンコンテナのコントローラー指定をラップに使用したシーン要素に移動します。"),
b.removeAttr(ea).children().attr(ea,c)}function n(b,c){var f=d.async.deferred();d.ajax({url:b,dataType:"html"}).done(function(g){var i=g.replace(ka,"").match(pa),g=i?"<div "+ha+" "+i[1]+">"+i[2]+"</div>":g;g=a(a.parseHTML(g));c?(g=B(g,"["+M+'="'+c+'"]'),0===g.length&&e(ia,[b,c]),g=g.eq(0)):(i=B(g,"["+W+"]"),d.settings.scene.autoCreateMainContainer&&0===i.length&&(i=B(g,"main")),0<i.length&&(g=i.eq(0)));h(g);f.resolve(g.children())}).fail(function(a){f.reject(a)});return f}function F(b,c){var e;if(x(b))e=
n(b,c);else{e=d.async.deferred();var f;f=null==b?a.parseHTML(va):d.u.obj.isJQueryObject(b)?b[0]:b;e.resolve(f)}return e.promise()}function H(){}function g(b,c){null==b&&(b=a("<div></div>").get(0));a(b).is("["+ga+"]")&&e(la);c?a(b).is(":not(["+W+"])")&&a(b).attr(W,W):a(b).is(":not(["+M+"])")&&a(b).attr(M,M);var d=fa.controllerInternal(b,qa,{isMain:c},{async:!1});a(b).attr(ga,ga);return d}function N(){ua||(ua=!0,f())}function R(a){return d.core.controllerManager.getControllers(a||document.body,{name:qa.__name,
deep:!0})}function L(a){if(null==a)return null;var b=null,c=null;x(a)?b=a:c=a;a=R(c);if(0===a.length)return null;if(b){for(c=0;c<a.length;c++)if(a[c]._containerName===b)return a[c];return null}return a[0]}function Y(a){this.trigger(P,a)}function $(){var a=v(this.rootElement);return!a?null:L(a)}var ea="data-h5-controller",Z="data-h5-dyn-controller-bound",T="data-h5-default-scene",V="data-h5-scene",M="data-h5-container",W="data-h5-main-container",ga="data-h5-dyn-container-bound",ha="data-h5-dyn-dummy-body",
P="sceneChangeRequest",y="__h5__RMI",S="__h5__RMI_Result",aa=1E5,C=100001,ia=100002,la=100008,ua=!1,ba={__name:"h5.scene.DummyController"};d.mixin.eventDispatcher.mix(p.prototype);a.extend(p.prototype,{send:function(a){this._closed?alert("クローズ済みのチャネルです。送信できません。"):(a=new i(this.type,a),this._targetWindow.postMessage(d.u.obj.serialize(a),location.origin))},subscribe:function(a,b){this._subscribers.push({func:a,thisObj:b?b:null})},close:function(){this._closed=!0;this.off(window,"message",this._recv)},
_receiveMessage:function(a){var b;try{if(b=d.u.obj.deserialize(a.data),b.type!==this.type)return}catch(c){return}for(var a=this._subscribers,e=0,f=a.length;e<f;e++){var g=a[e];g.func.call(g.thisObj,b.data)}this.dispatchEvent({type:"message",data:b.data})}});var ja={};a.extend(z.prototype,{_receive:function(a){var b=d.core.controllerManager.getControllers(document.body)[0],c=a.id,e=a.method,a=a.args;!b[e]||K(b[e])?this._callFunction(c,b,e,a):this._sendChannel.send({id:c,isAsync:!1,status:4,result:null})},
_callFunction:function(a,b,c,e){var e=O(e),f=void 0;try{f=b[c].apply(b,e)}catch(g){this._sendChannel.send({id:a,isAsync:!1,status:1,result:null});return}var h=this;d.async.isPromise(f)?f.done(function(){var b=d.u.obj.argsToArray(arguments);h._sendChannel.send({id:a,isAsync:!0,status:2,result:b})}).fail(function(){var b=d.u.obj.argsToArray(arguments);h._sendChannel.send({id:a,isAsync:!0,status:3,result:b})}):this._sendChannel.send({id:a,isAsync:!1,status:0,result:f})}});a.extend(q.prototype,{invoke:function(a,
b){var c=d.async.deferred(),e={id:this._invocationSeq.next(),method:a,args:b};this._invocationMap[e.id]=c;this._sendChannel.send(e);return c.promise()},_receive:function(a){var b=a.id,c=this._invocationMap[b];if(c){delete this._invocationMap[b];var b=a.result,d=a.status;a.isAsync?2===d?c.resolve.apply(c,b):c.reject.apply(c,b):0===d?c.resolve(b):c.reject()}}});window.opener&&new z;a.extend(b.prototype,{invoke:function(a,b){return this._rmi.invoke(a,b)},getControllerProxy:function(){return new c},setModal:function(a){this._isModal!=
a&&(this._isModal?(this._parentBlocker.hide(),this._parentBlocker=null):this._parentBlocker=d.ui.indicator({target:"body",block:!0,message:"子ウィンドウを開いている間は操作できません。",showThrobber:!1}).show(),this._isModal=a)},close:function(){var a=d.async.deferred();this.window.close();return a.promise()},_watchChild:function(){var a=this,b=setInterval(function(){a.window.closed&&(clearInterval(b),a.setModal(!1))},300)}});var ka=/<\!--(?:\s|\S)*?--\>/g,pa=/<body\b([^>]*)>((?:\s|\S)*?)(?:<\/body\s*>|<\/html\s*>|$)/i,
va='<div class="h5-scene"></div>',o={};a.extend(H.prototype,{onChange:function(b,c){var e=d.async.deferred();a(b).empty();a(c).appendTo(b);e.resolve();return e.promise()},onChangeStart:function(a){this._ind=d.ui.indicator({target:a,block:!0,message:"遷移中..."}).show()},onChangeEnd:function(){this._ind.hide()}});o["default"]=H;var I=null,oa=/Controller$/,qa={__name:"h5.scene.SceneContainerController",isMain:!1,_transition:null,_currentController:null,_isClickjackEnabled:!1,_dfd:null,_isNavigated:!1,
__init:function(b){var c=this.rootElement,d=this;(this.isMain=!!(b.args||{}).isMain)&&I&&e(100003);this._transition=this._createTransition();this._transition.onChangeStart(c);this._containerName=a(c).attr(W)||a(c).attr(M);this._currentController=null;h(c);this.on("{rootElement}",P,this.own(this._onSceneChangeRequest));if(this.isMain){I=this;this.on("{window}","popstate",this.own(this._onWindowPopstate));if(this._isClickjackEnabled)this.on("{a}","click",this.own(this._onAClick));s(c,null,void 0).done(function(a){d._currentController=
a;d._transition.onChangeEnd(d.rootElement,null,c);d._transition=null})}else s(c).done(function(a){d._currentController=a;d._transition.onChangeEnd(d.rootElement,null,c);d._transition=null})},__dispose:function(){fa.isDisposing(this._currentController)||this._currentController.dispose();this._currentController=null;a(this.rootElement).empty()},_onAClick:function(a){a.event.preventDefault();this.changeScene(a.event.originalEvent.target.href)},_onWindowPopstate:function(){this._changeScene(location.href)},
_onSceneChangeRequest:function(a){a.event.stopPropagation();setTimeout(this.own(function(){this.changeScene(a.evArg)}),0)},changeScene:function(b){if(x(b))return this.changeScene({to:b});var b=a.extend(!0,{},b),c=b.to;this._transition=this._createTransition(b.transition);this._transition.onChangeStart(this.rootElement,(this._currentController||{}).rootElement);var f=this._dfd=d.async.deferred();this._isNavigated=!0;if(this.isMain){oa.test(c)||delete b.to;x(c)||e(100004,[c]);-1!==c.indexOf("#")&&e(100005,
[c]);oa.test(c)&&e(100006,[c]);var g=ca(c);history.pushState(null,null,g)}this._changeScene(c,d.u.obj.deserialize(d.u.obj.serialize(b)));return f.promise()},_changeScene:function(b,c){var c=c||{},d=(this._currentController||{}).rootElement;this._isNavigated||(this._transition=this._createTransition(c.transition),this._transition.onChangeStart(this.rootElement,d));d&&l(d);var f=this;x(b)&&(oa.test(b)?w(b,a("<div></div>"),c.args).done(function(a){f._onLoadController(a,d)}):F(b,!this.isMain?c.container:
null).done(function(b){s(a("<div></div>").append(b),null,c.args).done(function(a){f._onLoadController(a,d)})}).fail(function(a){e(100009,[b],a)}))},_createTransition:function(a){var b=o[null!=a?a:"default"];b||e(100007,[a]);return new b},_onLoadController:function(b,c){var d=this,e=b.rootElement;this._transition.onChange(this.rootElement,e).done(function(){this._dfd&&this._dfd.resolve({from:c,to:e});c&&a(c).remove();d._currentController=b;d._transition.onChangeEnd(d.rootElement,c,e);d._isNavigated=
!1;d._dfd=null;d._transition=null})}};fa.controllerConstructor&&(fa.controllerConstructor.prototype.triggerSceneChange=Y,fa.controllerConstructor.prototype.getParentSceneContainer=$);d.settings.scene=d.settings.scene||{};a(function(){d.settings.scene.autoInit&&N()});d.u.obj.expose("h5.scene",{openWindow:function(a,c,e,f){var g=d.async.deferred(),h=new b(a,c,e,f);setTimeout(function(){g.resolve(h)},100);return g.promise()},createSceneContainer:g,init:N,getMainContainer:function(){return I},scan:f,
getAllSceneContainers:R,getSceneContainer:L})})()})(jQuery);